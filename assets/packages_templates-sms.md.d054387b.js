import{_ as s,o as a,c as n,V as l}from"./chunks/framework.c495fe11.js";const A=JSON.parse('{"title":"Templates-SMS","description":"","frontmatter":{},"headers":[],"relativePath":"packages/templates-sms.md","filePath":"packages/templates-sms.md"}'),o={name:"packages/templates-sms.md"},e=l(`<h1 id="templates-sms" tabindex="-1">Templates-SMS <a class="header-anchor" href="#templates-sms" aria-label="Permalink to &quot;Templates-SMS&quot;">​</a></h1><p><a href="https://codecov.io/gh/EscolaLMS/Templates-SMS" target="_blank" rel="noreferrer"><img src="https://codecov.io/gh/EscolaLMS/Templates-SMS/branch/main/graph/badge.svg?token=O91FHNKI6R" alt="codecov"></a><a href="https://github.com/EscolaLMS/Templates-SMS/actions/workflows/test.yml" target="_blank" rel="noreferrer"><img src="https://github.com/EscolaLMS/Templates-SMS/actions/workflows/test.yml/badge.svg" alt="Tests PHPUnit in environments"></a><a href="https://packagist.org/packages/escolalms/templates-sms" target="_blank" rel="noreferrer"><img src="https://img.shields.io/packagist/dt/escolalms/templates-sms" alt="downloads"></a><a href="https://packagist.org/packages/escolalms/templates-sms" target="_blank" rel="noreferrer"><img src="https://img.shields.io/packagist/v/escolalms/templates-sms" alt="downloads"></a><a href="https://packagist.org/packages/escolalms/templates-sms" target="_blank" rel="noreferrer"><img src="https://img.shields.io/packagist/l/escolalms/templates-sms" alt="downloads"></a></p><h2 id="what-does-it-do" tabindex="-1">What does it do <a class="header-anchor" href="#what-does-it-do" aria-label="Permalink to &quot;What does it do&quot;">​</a></h2><p>Package for sms notifications with editable templates (for important user-related events). This package supports sending sms via twilio.</p><h2 id="installing" tabindex="-1">Installing <a class="header-anchor" href="#installing" aria-label="Permalink to &quot;Installing&quot;">​</a></h2><ul><li><code>composer require escolalms/templates-sms</code></li><li><code>php artisan db:seed --class=&quot;EscolaLms\\Templates-SMS\\Database\\Seeders\\TemplateSmsSeeder&quot;</code></li></ul><h2 id="configuration" tabindex="-1">Configuration <a class="header-anchor" href="#configuration" aria-label="Permalink to &quot;Configuration&quot;">​</a></h2><p>You can configure the connection to Twilio through keys in the <code>.env</code> file:</p><ul><li><code>TWILIO_SID</code> - twilio SID unique key</li><li><code>TWILIO_TOKEN</code> - twilio auth token</li><li><code>TWILIO_FROM</code> - twilio phone number</li><li><code>TWILIO_SSL_VERIFY</code> - twilio ssl verify</li></ul><p>You can also change the default driver in <code>SMS_DRIVER</code></p><h2 id="example" tabindex="-1">Example <a class="header-anchor" href="#example" aria-label="Permalink to &quot;Example&quot;">​</a></h2><h3 id="sending-sms" tabindex="-1">Sending SMS <a class="header-anchor" href="#sending-sms" aria-label="Permalink to &quot;Sending SMS&quot;">​</a></h3><p>Sending an SMS using the <code>Sms</code> facade</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">Sms</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">driver</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">twilio</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)-&gt;</span><span style="color:#82AAFF;">send</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123456789</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">SMS message</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>or</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">Sms</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">send</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123456789</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">SMS message</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h3 id="custom-driver" tabindex="-1">Custom driver <a class="header-anchor" href="#custom-driver" aria-label="Permalink to &quot;Custom driver&quot;">​</a></h3><p>You can define your own driver for sending sms. The driver must implement the interface <code>\\EscolaLms\\TemplatesSms\\Drivers\\Contracts\\SmsDriver</code>.</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SmsDriver</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">send</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">to</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">content</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">array</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">mediaUrls </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[],</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">array</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">params </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[]):</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">bool</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>Example custom driver:</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">CustomDriver</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">implements</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">EscolaLms</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">TemplatesSms</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">Drivers</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">Contracts</span><span style="color:#89DDFF;">\\</span><span style="color:#FFCB6B;">SmsDriver</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">send</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">to</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">content</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">array</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">mediaUrls </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[],</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">params </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[]):</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">bool</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// Implement send() method.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>Register a new driver, we would do the following:</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">Sms</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">extend</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">custom</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">CustomDriver</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">});</span></span></code></pre></div><h2 id="tests" tabindex="-1">Tests <a class="header-anchor" href="#tests" aria-label="Permalink to &quot;Tests&quot;">​</a></h2><p>Run <code>./vendor/bin/phpunit</code> to run tests. See <a href="https://github.com/EscolaLMS/Templates-SMS/tree/main/tests" target="_blank" rel="noreferrer">tests</a> folder as it&#39;s quite good staring point as documentation appendix.</p><p><a href="https://codecov.io/gh/EscolaLMS/Templates-SMS" target="_blank" rel="noreferrer"><img src="https://codecov.io/gh/EscolaLMS/Templates-SMS/branch/main/graph/badge.svg?token=O91FHNKI6R" alt="codecov"></a><a href="https://github.com/EscolaLMS/Templates-SMS/actions/workflows/test.yml" target="_blank" rel="noreferrer"><img src="https://github.com/EscolaLMS/Templates-SMS/actions/workflows/test.yml/badge.svg" alt="Tests PHPUnit in environments"></a></p><p>This package has a facade for testing. The Sms facade&#39;s fake method allows you to easily a fake sms driver.</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">testSms</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">Sms</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">fake</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">service</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">sendSms</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">phone1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">Sms</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">assertSent</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">phone1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">Sms</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">assertNotSent</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">phone2</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">testSms</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">Sms</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">fake</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">Sms</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">assertSent</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">phone1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">fn</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">sms</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">sms</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#A6ACCD;">content </span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Sms message</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div>`,29),p=[e];function t(r,c,D,i,F,y){return a(),n("div",null,p)}const d=s(o,[["render",t]]);export{A as __pageData,d as default};
