import{_ as s,o as e,c as a,V as o}from"./chunks/framework.c495fe11.js";const g=JSON.parse('{"title":"Courses","description":"","frontmatter":{},"headers":[],"relativePath":"packages/courses.md","filePath":"packages/courses.md"}'),n={name:"packages/courses.md"},t=o(`<h1 id="courses" tabindex="-1">Courses <a class="header-anchor" href="#courses" aria-label="Permalink to &quot;Courses&quot;">​</a></h1><p>Courses and content package</p><p><a href="https://escolalms.github.io/Courses/" target="_blank" rel="noreferrer"><img src="https://img.shields.io/badge/documentation-swagger-green" alt="swagger"></a><a href="https://codecov.io/gh/EscolaLMS/Courses" target="_blank" rel="noreferrer"><img src="https://codecov.io/gh/EscolaLMS/Courses/branch/main/graph/badge.svg?token=NRAN4R8AGZ" alt="codecov"></a><a href="https://github.com/EscolaLMS/Courses/actions/workflows/test.yml" target="_blank" rel="noreferrer"><img src="https://github.com/EscolaLMS/Courses/actions/workflows/test.yml/badge.svg" alt="phpunit"></a><a href="https://packagist.org/packages/escolalms/courses" target="_blank" rel="noreferrer"><img src="https://img.shields.io/packagist/dt/escolalms/courses" alt="downloads"></a><a href="https://packagist.org/packages/escolalms/courses" target="_blank" rel="noreferrer"><img src="https://img.shields.io/packagist/v/escolalms/courses" alt="downloads"></a><a href="https://packagist.org/packages/escolalms/courses" target="_blank" rel="noreferrer"><img src="https://img.shields.io/packagist/l/escolalms/courses" alt="downloads"></a><a href="https://codeclimate.com/github/EscolaLMS/Courses/maintainability" target="_blank" rel="noreferrer"><img src="https://api.codeclimate.com/v1/badges/0c9e2593fb30e2048f95/maintainability" alt="Maintainability"></a><a href="https://dashboard.stryker-mutator.io/reports/github.com/EscolaLMS/Courses/main" target="_blank" rel="noreferrer"><img src="https://img.shields.io/endpoint?style=flat&amp;url=https%3A%2F%2Fbadge-api.stryker-mutator.io%2Fgithub.com%2FEscolaLMS%2FCourses%2Fmain" alt="Mutation testing badge"></a></p><h2 id="what-does-it-do" tabindex="-1">What does it do <a class="header-anchor" href="#what-does-it-do" aria-label="Permalink to &quot;What does it do&quot;">​</a></h2><p>This package is used for creating Course for EscolaLms.</p><h2 id="installing" tabindex="-1">Installing <a class="header-anchor" href="#installing" aria-label="Permalink to &quot;Installing&quot;">​</a></h2><ul><li><code>composer require escolalms/courses</code></li><li><code>php artisan migrate</code></li><li><code>php artisan db:seed --class=&quot;EscolaLms\\Courses\\Database\\Seeders\\CoursesPermissionSeeder&quot;</code></li></ul><h2 id="schedule" tabindex="-1">Schedule <a class="header-anchor" href="#schedule" aria-label="Permalink to &quot;Schedule&quot;">​</a></h2><ul><li>Schedules are available in ScheduleServiceProvider <ul><li><code>$schedule-&gt;job(CheckForDeadlines::class)-&gt;hourly()</code> - executed every hours</li><li><code>$schedule-&gt;job(ActivateCourseJob::class)-&gt;daily()</code> - executed every days</li></ul></li></ul><h2 id="endpoints" tabindex="-1">Endpoints <a class="header-anchor" href="#endpoints" aria-label="Permalink to &quot;Endpoints&quot;">​</a></h2><p>All the endpoints are defined in <a href="https://escolalms.github.io/Courses/" target="_blank" rel="noreferrer"><img src="https://img.shields.io/badge/documentation-swagger-green" alt="swagger"></a></p><h2 id="tests" tabindex="-1">Tests <a class="header-anchor" href="#tests" aria-label="Permalink to &quot;Tests&quot;">​</a></h2><p>Run <code>./vendor/bin/phpunit --filter &#39;EscolaLms\\\\Courses\\\\Tests&#39;</code> to run tests. See <a href="https://github.com/EscolaLMS/Courses/tree/main/tests" target="_blank" rel="noreferrer">tests</a> folder as it&#39;s quite good staring point as documentation appendix.</p><h2 id="events" tabindex="-1">Events <a class="header-anchor" href="#events" aria-label="Permalink to &quot;Events&quot;">​</a></h2><ul><li><code>EscolaLms\\Courses\\Events\\CourseAccessFinished</code> =&gt; Event is dispatched when users lost access to course.</li><li><code>EscolaLms\\Courses\\Events\\CourseAccessStarted</code> =&gt; Event is dispatched when users received access to course.</li><li><code>EscolaLms\\Courses\\Events\\CourseAssigned</code> =&gt; Event is dispatched when admin assigned access user.</li><li><code>EscolaLms\\Courses\\Events\\CourseDeadlineSoon</code> =&gt; Event is dispatched when course deadline is coming out.</li><li><code>EscolaLms\\Courses\\Events\\CoursedPublished</code> =&gt; Event is dispatched when course is published.</li><li><code>EscolaLms\\Courses\\Events\\CourseFinished</code> =&gt; Event is dispatched when course is ended.</li><li><code>EscolaLms\\Courses\\Events\\CourseStarted</code> =&gt; Event is dispatched when course is started.</li><li><code>EscolaLms\\Courses\\Events\\CourseStatusChanged</code> =&gt; Event is dispatched when course has a status change.</li><li><code>EscolaLms\\Courses\\Events\\CourseTutorAssigned</code> =&gt; Event is dispatched when tutor is assigned to course.</li><li><code>EscolaLms\\Courses\\Events\\CourseTutorUnassigned</code> =&gt; Event is dispatched when tutor is unassigned to course.</li><li><code>EscolaLms\\Courses\\Events\\CourseUnassigned</code> =&gt; Event is dispatched when user is unassigned to course.</li><li><code>EscolaLms\\Courses\\Events\\TopicFinished</code> =&gt; Event is dispatched when course topic is finished.</li></ul><h2 id="permissions" tabindex="-1">Permissions <a class="header-anchor" href="#permissions" aria-label="Permalink to &quot;Permissions&quot;">​</a></h2><p>Permissions are defined in <a href="https://github.com/EscolaLMS/Courses/tree/main/vendor/escolalms/courses/database/seeders/CoursesPermissionSeeder.php" target="_blank" rel="noreferrer">seeder</a></p><h2 id="model-relation" tabindex="-1">Model relation <a class="header-anchor" href="#model-relation" aria-label="Permalink to &quot;Model relation&quot;">​</a></h2><p>The model user must be extended with the class HasCourses :</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">class User extends EscolaLms\\Core\\Models\\User</span></span>
<span class="line"><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    use HasCourses;</span></span></code></pre></div><h2 id="database-relation" tabindex="-1">Database relation <a class="header-anchor" href="#database-relation" aria-label="Permalink to &quot;Database relation&quot;">​</a></h2><p>There is simple relation. <a href="https://github.com/EscolaLMS/Courses/tree/main/doc" target="_blank" rel="noreferrer">see docs for diagram</a></p><ol><li><code>Course</code> general category of the course</li><li><code>Lesson</code> grouped by Course</li><li><code>Topic</code> grouped by Lesson</li></ol><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">Course 1 -&gt; n Lesson</span></span>
<span class="line"><span style="color:#A6ACCD;">Lesson 1 -&gt; n Topic</span></span>
<span class="line"><span style="color:#A6ACCD;">Topic 1 -&gt; 1 TopicContent</span></span></code></pre></div><p><code>TopicContent</code> is an abstract model, this package contains some sample implementatio eg, <code>RichText</code>, <code>Audio</code>, <code>Video</code>, <code>H5P</code> and <code>Image</code></p><p>You create any of the Content model by post to the same Topic endponit (create and update), <a href="https://github.com/EscolaLMS/Courses/tree/main/doc" target="_blank" rel="noreferrer">see docs examples</a></p><p><strong>Note</strong> that <code>/api/topics</code> is using <code>form-data</code> - this is due to PHP nature of posting files</p><p>List of possible <code>TopicContent</code>s is availabe in the endpoint <code>/api/topics/types</code></p><h2 id="curriculum-sylabus-program" tabindex="-1">Curriculum/Sylabus/Program <a class="header-anchor" href="#curriculum-sylabus-program" aria-label="Permalink to &quot;Curriculum/Sylabus/Program&quot;">​</a></h2><p>App user access the course by fetching <code>GET /api/courses/{id}/program</code> endpoint. This is after user purchase or has other access to the course. this endpoints renders tree of Course, Lessons, Topic with Contents essential to render whole course.</p><h2 id="adding-new-topiccontent-type" tabindex="-1">Adding new <code>TopicContent</code> type <a class="header-anchor" href="#adding-new-topiccontent-type" aria-label="Permalink to &quot;Adding new \`TopicContent\` type&quot;">​</a></h2><p>In the ServiceProvider register your class like</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">use</span><span style="color:#FFCB6B;"> </span><span style="color:#A6ACCD;">Illuminate</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">Support</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">ServiceProvider</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">use</span><span style="color:#FFCB6B;"> </span><span style="color:#A6ACCD;">EscolaLms</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">Courses</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">Facades</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">Topic</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">CustomServiceProvider</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ServiceProvider</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">register</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">Topic</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">registerContentClass</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">TopicContentCustom</span><span style="color:#89DDFF;">::</span><span style="color:#F78C6C;">class</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// or</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">Topic</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">registerContentClasses</span><span style="color:#89DDFF;">([</span><span style="color:#FFCB6B;">TopicContentCustom</span><span style="color:#89DDFF;">::</span><span style="color:#F78C6C;">class</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">TopicAnotherContentCustom</span><span style="color:#89DDFF;">::</span><span style="color:#F78C6C;">class</span><span style="color:#89DDFF;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// also register JSON Resource for a type</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">Topic</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">registerResourceClasses</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">Audio</span><span style="color:#89DDFF;">::</span><span style="color:#F78C6C;">class</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">client</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ClientAudioResource</span><span style="color:#89DDFF;">::</span><span style="color:#F78C6C;">class</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">admin</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">AdminAudioResource</span><span style="color:#89DDFF;">::</span><span style="color:#F78C6C;">class</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">export</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ExportAudioResource</span><span style="color:#89DDFF;">::</span><span style="color:#F78C6C;">class</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>see <a href="https://github.com/EscolaLMS/Courses/tree/main/src/EscolaLmsCourseServiceProvider.php" target="_blank" rel="noreferrer">EscolaLmsCourseServiceProvider.php</a> as reference as well as <a href="./package2/src/Models/TopicContent.html">Models/TopicContent</a></p><h3 id="content" tabindex="-1">Content <a class="header-anchor" href="#content" aria-label="Permalink to &quot;Content&quot;">​</a></h3><p>Package comes with seeder that create course with lessons and topics</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">php artisan db</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">seed </span><span style="color:#89DDFF;">--</span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\\EscolaLms\\Courses\\Database\\Seeders\\CoursesSeeder</span><span style="color:#89DDFF;">&quot;</span></span></code></pre></div>`,37),l=[t];function r(c,p,i,d,u,h){return e(),a("div",null,l)}const y=s(n,[["render",r]]);export{g as __pageData,y as default};
