import{_ as c,H as o,o as a,c as i,b as n,w as t,a5 as d,V as l,k as e,a as s,L as u}from"./chunks/framework.c495fe11.js";const C=JSON.parse('{"title":"Course Access","description":"","frontmatter":{},"headers":[],"relativePath":"packages/course-access.md","filePath":"packages/course-access.md"}'),h={name:"packages/course-access.md"},p=l('<h1 id="course-access" tabindex="-1">Course Access <a class="header-anchor" href="#course-access" aria-label="Permalink to &quot;Course Access&quot;">​</a></h1><p><a href="https://escolalms.github.io/Course-Access/" target="_blank" rel="noreferrer"><img src="https://img.shields.io/badge/documentation-swagger-green" alt="swagger"></a><a href="https://codecov.io/gh/EscolaLMS/Course-Access" target="_blank" rel="noreferrer"><img src="https://codecov.io/gh/EscolaLMS/Course-Access/branch/main/graph/badge.svg?token=NRAN4R8AGZ" alt="codecov"></a><a href="https://github.com/EscolaLMS/Course-Access/actions/workflows/test.yml" target="_blank" rel="noreferrer"><img src="https://github.com/EscolaLMS/Course-Access/actions/workflows/test.yml/badge.svg" alt="phpunit"></a><a href="https://packagist.org/packages/escolalms/course-access" target="_blank" rel="noreferrer"><img src="https://img.shields.io/packagist/dt/escolalms/course-access" alt="downloads"></a><a href="https://packagist.org/packages/escolalms/course-access" target="_blank" rel="noreferrer"><img src="https://img.shields.io/packagist/v/escolalms/course-access" alt="downloads"></a><a href="https://packagist.org/packages/escolalms/course-access" target="_blank" rel="noreferrer"><img src="https://img.shields.io/packagist/l/escolalms/course-access" alt="downloads"></a><a href="https://codeclimate.com/github/EscolaLMS/Course-Access/maintainability" target="_blank" rel="noreferrer"><img src="https://api.codeclimate.com/v1/badges/0c9e2593fb30e2048f95/maintainability" alt="Maintainability"></a></p><h2 id="what-does-it-do" tabindex="-1">What does it do <a class="header-anchor" href="#what-does-it-do" aria-label="Permalink to &quot;What does it do&quot;">​</a></h2><p>This package is used to manage access to the course for individual users and user groups.</p><p>Additionally, it introduces a mechanism where users can send access enquiries with additional information, and administrators (users with appropriate permissions) can approve or remove them.</p><h2 id="installing" tabindex="-1">Installing <a class="header-anchor" href="#installing" aria-label="Permalink to &quot;Installing&quot;">​</a></h2><ul><li><code>composer require escolalms/course-access</code></li><li><code>php artisan migrate</code></li><li><code>php artisan db:seed --class=&quot;EscolaLms\\CourseAccess\\Database\\Seeders\\CourseAccessPermissionSeeder&quot;</code></li></ul><h2 id="endpoints" tabindex="-1">Endpoints <a class="header-anchor" href="#endpoints" aria-label="Permalink to &quot;Endpoints&quot;">​</a></h2><p>The endpoints are defined in <a href="https://escolalms.github.io/Course-Access/" target="_blank" rel="noreferrer"><img src="https://img.shields.io/badge/documentation-swagger-green" alt="swagger"></a></p><h2 id="tests" tabindex="-1">Tests <a class="header-anchor" href="#tests" aria-label="Permalink to &quot;Tests&quot;">​</a></h2><p>Run <code>./vendor/bin/phpunit</code> to run tests. Test details <a href="https://codecov.io/gh/EscolaLMS/Course-Access" target="_blank" rel="noreferrer"><img src="https://codecov.io/gh/EscolaLMS/Course-Access/branch/main/graph/badge.svg?token=NRAN4R8AGZ" alt="codecov"></a></p><h2 id="events" tabindex="-1">Events <a class="header-anchor" href="#events" aria-label="Permalink to &quot;Events&quot;">​</a></h2><h3 id="course-access-enquiry" tabindex="-1">Course Access Enquiry <a class="header-anchor" href="#course-access-enquiry" aria-label="Permalink to &quot;Course Access Enquiry&quot;">​</a></h3><ul><li><code>CourseAccessEnquiryAdminCreatedEvent</code> - This event is dispatched when a student creates an enquiry for course access.</li><li><code>CourseAccessEnquiryStudentCreatedEvent</code> - This event is dispatched to all users who have the <code>EnquiryStatusEnum::APPROVE_COURSE_ACCESS_ENQUIRY</code> permission, allowing them to approve the course access enquiry.</li></ul><p>These events are listened to by the <a href="https://github.com/EscolaLMS/Templates-Email/tree/main/src/CourseAccess" target="_blank" rel="noreferrer">escolalms/templates-email</a> package, which sends emails based on its own logic. Additionally, notifications are stored in database.</p><h3 id="course-access-1" tabindex="-1">Course Access <a class="header-anchor" href="#course-access-1" aria-label="Permalink to &quot;Course Access&quot;">​</a></h3><ul><li><code>CourseAssigned</code> and <code>CourseAccessStarted</code> - These events are dispatched when a user is assigned access to a course. It contains information about the user and the course to which access has been granted.</li><li><code>CourseUnassigned</code> and <code>CourseFinished</code> - These events are dispatched when a user is denied access to a course.</li></ul><p>The <a href="https://github.com/EscolaLMS/Templates-Email/tree/main/src/Courses" target="_blank" rel="noreferrer">escolalms/templates-email</a> package also listens to the above events.</p><h2 id="course-access-enquiry-sequence-diagram" tabindex="-1">Course Access Enquiry - sequence diagram <a class="header-anchor" href="#course-access-enquiry-sequence-diagram" aria-label="Permalink to &quot;Course Access Enquiry - sequence diagram&quot;">​</a></h2>',19),m=e("h2",{id:"permissions",tabindex:"-1"},[s("Permissions "),e("a",{class:"header-anchor",href:"#permissions","aria-label":'Permalink to "Permissions"'},"​")],-1),A=e("p",null,[s("Permissions are defined in "),e("a",{href:"https://github.com/EscolaLMS/Course-Access/blob/main/database/seeders/CourseAccessPermissionSeeder.php",target:"_blank",rel:"noreferrer"},"seeder"),s(".")],-1);function g(b,E,f,k,q,_){const r=o("Mermaid");return a(),i("div",null,[p,(a(),n(d,null,{default:t(()=>[u(r,{id:"mermaid-89",graph:"sequenceDiagram%0A%0A%20%20%20%20actor%20Student%0A%20%20%20%20actor%20Administrator%0A%20%20%20%20participant%20FrontApp%0A%20%20%20%20participant%20AdminPanel%0A%20%20%20%20participant%20Backend%0A%0A%20%20%20%20Student%20-%3E%3E%20FrontApp%3A%20Send%20access%20request%0A%20%20%20%20FrontApp%20-%3E%3E%20Backend%3A%20Forward%20access%20request%0A%20%20%20%20Backend%20-%3E%3E%20Backend%3A%20Process%20access%20request%0A%20%20%20%20alt%20Request%20is%20valid%0A%20%20%20%20%20%20%20%20Backend%20--%3E%3E%20Administrator%3A%20Notify%20about%20new%20access%20request%0A%20%20%20%20%20%20%20%20Backend%20--%3E%3E%20Student%3A%20Send%20confirmation%0A%20%20%20%20%20%20%20%20alt%20Administrator%20approves%20request%0A%20%20%20%20%20%20%20%20%20%20%20%20Administrator%20-%3E%3E%20AdminPanel%3A%20Access%20request%20approval%0A%20%20%20%20%20%20%20%20%20%20%20%20AdminPanel%20-%3E%3E%20Backend%3A%20Approve%20access%20request%0A%20%20%20%20%20%20%20%20%20%20%20%20Backend%20-%3E%3E%20Backend%3A%20Grant%20access%20to%20course%0A%20%20%20%20%20%20%20%20%20%20%20%20Backend%20-%3E%3E%20Student%3A%20Send%20access%20confirmation%0A%20%20%20%20%20%20%20%20else%20Administrator%20remove%20request%0A%20%20%20%20%20%20%20%20%20%20%20%20Administrator%20-%3E%3E%20AdminPanel%3A%20Access%20request%20remove%0A%20%20%20%20%20%20%20%20%20%20%20%20AdminPanel%20-%3E%3E%20Backend%3A%20Remove%20access%20request%0A%20%20%20%20%20%20%20%20else%20Setting%20auto_accept_access_request%20is%20true%0A%20%20%20%20%20%20%20%20%20%20%20%20Backend%20-%3E%3E%20Backend%3A%20Grant%20access%20to%20course%0A%20%20%20%20%20%20%20%20%20%20%20%20Backend%20-%3E%3E%20Student%3A%20Send%20access%20confirmation%0A%20%20%20%20%20%20%20%20end%0A%20%20%20%20else%20Request%20is%20invalid%0A%20%20%20%20%20%20%20%20Backend%20--%3E%3E%20FrontApp%3A%20Send%20invalid%20request%20notification%0A%20%20%20%20%20%20%20%20FrontApp%20--%3E%3E%20Student%3A%20Forward%20invalid%20request%20notification%0A%20%20%20%20end%0A%20%20%20%20%0A"})]),fallback:t(()=>[s(" Loading... ")]),_:1})),m,A])}const S=c(h,[["render",g]]);export{C as __pageData,S as default};
