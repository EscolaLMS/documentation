import{_ as e,o as a,c as t,V as r}from"./chunks/framework.c495fe11.js";const g=JSON.parse('{"title":"Cart","description":"","frontmatter":{},"headers":[],"relativePath":"packages/cart.md","filePath":"packages/cart.md"}'),o={name:"packages/cart.md"},s=r('<h1 id="cart" tabindex="-1">Cart <a class="header-anchor" href="#cart" aria-label="Permalink to &quot;Cart&quot;">​</a></h1><p><a href="https://escolalms.github.io/Cart/" target="_blank" rel="noreferrer"><img src="https://img.shields.io/badge/documentation-swagger-green" alt="swagger"></a><a href="https://codecov.io/gh/EscolaLMS/cart" target="_blank" rel="noreferrer"><img src="https://codecov.io/gh/EscolaLMS/cart/branch/main/graph/badge.svg?token=NRAN4R8AGZ" alt="codecov"></a><a href="https://github.com/EscolaLMS/cart/actions/workflows/test.yml" target="_blank" rel="noreferrer"><img src="https://github.com/EscolaLMS/cart/actions/workflows/test.yml/badge.svg" alt="phpunit"></a><a href="https://packagist.org/packages/escolalms/cart" target="_blank" rel="noreferrer"><img src="https://img.shields.io/packagist/dt/escolalms/cart" alt="downloads"></a><a href="https://packagist.org/packages/escolalms/cart" target="_blank" rel="noreferrer"><img src="https://img.shields.io/packagist/v/escolalms/cart" alt="downloads"></a><a href="https://packagist.org/packages/escolalms/cart" target="_blank" rel="noreferrer"><img src="https://img.shields.io/packagist/l/escolalms/cart" alt="downloads"></a><a href="https://codeclimate.com/github/EscolaLMS/Cart/maintainability" target="_blank" rel="noreferrer"><img src="https://api.codeclimate.com/v1/badges/b8c8aa16976961f670b4/maintainability" alt="Maintainability"></a><a href="https://dashboard.stryker-mutator.io/reports/github.com/EscolaLMS/Cart/main" target="_blank" rel="noreferrer"><img src="https://img.shields.io/endpoint?style=flat&amp;url=https%3A%2F%2Fbadge-api.stryker-mutator.io%2Fgithub.com%2FEscolaLMS%2FCart%2Fmain" alt="Mutation testing badge"></a></p><h2 id="purpose" tabindex="-1">Purpose <a class="header-anchor" href="#purpose" aria-label="Permalink to &quot;Purpose&quot;">​</a></h2><p>This package lets you manage user Shopping Cart, and defines what is a buyable Product (and what are Productables, that is sellable things), that can be then added to the Cart. This package also lets your users create Orders and buy content of their Carts.</p><h2 id="installation" tabindex="-1">Installation <a class="header-anchor" href="#installation" aria-label="Permalink to &quot;Installation&quot;">​</a></h2><ul><li><code>composer require escolalms/cart</code></li><li><code>php artisan migrate</code></li><li><code>php artisan db:seed --class=&quot;EscolaLms\\Cart\\Database\\Seeders\\CartPermissionSeeder&quot;</code></li></ul><h2 id="dependencies" tabindex="-1">Dependencies <a class="header-anchor" href="#dependencies" aria-label="Permalink to &quot;Dependencies&quot;">​</a></h2><p>This package depends on <a href="https://github.com/EscolaLMS/Payments" target="_blank" rel="noreferrer">EscolaLms/Payments</a> package for creating and processing Payments for Orders.</p><h2 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-label="Permalink to &quot;Usage&quot;">​</a></h2><h3 id="product" tabindex="-1">Product <a class="header-anchor" href="#product" aria-label="Permalink to &quot;Product&quot;">​</a></h3><p><code>EscolaLms\\Cart\\Models\\Product</code> is a Model that represents abstract buyable thing that can be added to Cart and bought. Product by itself has no additional functionality than being bought and assigned to Users.</p><p>Products consist of one (Single type products) or more (Bundle type products) Productables - that is, Models representing concrete things that are sold in your (LMS) application, for example Courses. Productables must implement Productable interface.</p><h3 id="productable" tabindex="-1">Productable <a class="header-anchor" href="#productable" aria-label="Permalink to &quot;Productable&quot;">​</a></h3><p><code>EscolaLms\\Cart\\Contracts\\Productable</code> interface defines how Model representing sellable things behave and which methods and relations they must contain.</p><h3 id="defining-productables" tabindex="-1">Defining Productables <a class="header-anchor" href="#defining-productables" aria-label="Permalink to &quot;Defining Productables&quot;">​</a></h3><p>To create (and sell) Products, you need to define Productables. A Productable is a Model implementing <code>EscolaLms\\Cart\\Models\\Contracts</code> interface (and possibly using <code>EscolaLms\\Cart\\Contracts\\ProductableTrait</code>). After adding this interface to your Model, you need to call <code>EscolaLms\\Cart\\Facades\\Shop::registerProductableClass(Productable::class)</code> in one of your Service Providers boot method. This will enable using this Productable Model as a (part of) Product which can then be sold.</p><h3 id="shop-facade" tabindex="-1">Shop Facade <a class="header-anchor" href="#shop-facade" aria-label="Permalink to &quot;Shop Facade&quot;">​</a></h3><p>Shop Facade wraps <code>EscolaLms\\Cart\\Services\\ProductService</code> giving access to methods related to registering Productables and managing Products.</p><h3 id="cart-model" tabindex="-1">Cart Model <a class="header-anchor" href="#cart-model" aria-label="Permalink to &quot;Cart Model&quot;">​</a></h3><p><code>EscolaLms\\Cart\\Models\\Cart</code> is a model representing User Cart. Every User can have one active (existing) Cart at given time.</p><p>To create Cart (or retrieve current active Cart) for a given user, you need to call <code>EscolaLms\\Cart\\Services\\ShopService::cartForUser($user)</code> method.</p><h3 id="cart-manager" tabindex="-1">Cart Manager <a class="header-anchor" href="#cart-manager" aria-label="Permalink to &quot;Cart Manager&quot;">​</a></h3><p>Cart and its content is managed using <code>EscolaLms\\Cart\\Services\\CartManager</code> class instance attached to that Cart, instead of manipulating Cart object directly. <code>CartManager</code> is used by <code>EscolaLms\\Cart\\Services\\ShopService</code> (and you probably don&#39;t need to use it directly, as methods in ShopService represent all sensible use cases).</p><h3 id="shop-service" tabindex="-1">Shop Service <a class="header-anchor" href="#shop-service" aria-label="Permalink to &quot;Shop Service&quot;">​</a></h3><p>Shop Service contains functionality related to managing Cart content (adding/removing Products), and purchasing Cart (storing Cart data as an Order and processing payment flow).</p><h2 id="endpoints" tabindex="-1">Endpoints <a class="header-anchor" href="#endpoints" aria-label="Permalink to &quot;Endpoints&quot;">​</a></h2><p>All the endpoints are defined in <a href="https://escolalms.github.io/cart/" target="_blank" rel="noreferrer"><img src="https://img.shields.io/badge/documentation-swagger-green" alt="swagger"></a>.</p><h2 id="tests" tabindex="-1">Tests <a class="header-anchor" href="#tests" aria-label="Permalink to &quot;Tests&quot;">​</a></h2><p>Run <code>./vendor/bin/phpunit</code> to run tests. See <a href="https://github.com/EscolaLMS/Cart/tree/main/tests" target="_blank" rel="noreferrer">tests</a> directory as it&#39;s a quite good starting point for understanding how this package works. Especially pay attention to <a href="https://github.com/EscolaLMS/Cart/tree/main/tests/Mocks" target="_blank" rel="noreferrer">tests/Mocks</a> directory, as it represents core concepts of Productable and use of Productable Trait &amp; Interface.</p><p>Test details <a href="https://codecov.io/gh/EscolaLMS/cart" target="_blank" rel="noreferrer"><img src="https://codecov.io/gh/EscolaLMS/cart/branch/main/graph/badge.svg?token=NRAN4R8AGZ" alt="codecov"></a> <a href="https://github.com/EscolaLMS/cart/actions/workflows/test.yml" target="_blank" rel="noreferrer"><img src="https://github.com/EscolaLMS/cart/actions/workflows/test.yml/badge.svg" alt="phpunit"></a></p><h2 id="events" tabindex="-1">Events <a class="header-anchor" href="#events" aria-label="Permalink to &quot;Events&quot;">​</a></h2><ul><li><code>EscolaLms\\Cart\\Events\\AbandonedCartEvent</code> - emited when scheduled job finds a non-empty Cart older than 24 hours</li><li><code>EscolaLms\\Cart\\Events\\OrderCancelled</code> - emited after payment processing is cancelled, which marks Order as cancelled</li><li><code>EscolaLms\\Cart\\Events\\OrderCreated</code> - emited when new Order is created</li><li><code>EscolaLms\\Cart\\Events\\OrderPaid</code> - emited after order was paid</li><li><code>EscolaLms\\Cart\\Events\\ProductableAttached</code> - emited after Productable is attached to an User (for example after Product containing that Productable is attached to User, or admin endpoints for managing Productable attachments is used)</li><li><code>EscolaLms\\Cart\\Events\\ProductableDetached</code> - analogous to ProductableAttached</li><li><code>EscolaLms\\Cart\\Events\\ProductAddedToCart</code> - emitted when Product is added to Cart</li><li><code>EscolaLms\\Cart\\Events\\ProductAttached</code> - emitted when Product is attached to User (after buying it or adding it using admin endpoint)</li><li><code>EscolaLms\\Cart\\Events\\ProductBought</code> - emited after Product is bought by User</li><li><code>EscolaLms\\Cart\\Events\\ProductDetached</code> - analogous to ProductAttached</li><li><code>EscolaLms\\Cart\\Events\\ProductRemovedFromCart</code> - analogous to ProductAdded</li></ul><h2 id="listeners" tabindex="-1">Listeners <a class="header-anchor" href="#listeners" aria-label="Permalink to &quot;Listeners&quot;">​</a></h2><ul><li><code>EscolaLms\\Cart\\Listeners\\PaymentSuccessListener</code> - this listener handles marking Orders as Paid after a Payment created for given Order is marked as Paid (listens to <code>EscolaLms\\Payments\\Events\\PaymentSuccess</code> event)</li></ul><h2 id="how-to-use-this-on-frontend" tabindex="-1">How to use this on frontend <a class="header-anchor" href="#how-to-use-this-on-frontend" aria-label="Permalink to &quot;How to use this on frontend&quot;">​</a></h2><h3 id="admin-panel" tabindex="-1">Admin panel <a class="header-anchor" href="#admin-panel" aria-label="Permalink to &quot;Admin panel&quot;">​</a></h3><h4 id="left-menu" tabindex="-1"><strong>Left menu</strong> <a class="header-anchor" href="#left-menu" aria-label="Permalink to &quot;**Left menu**&quot;">​</a></h4><p><img src="https://raw.githubusercontent.com/EscolaLMS/Cart/main/docs/menu.png" alt="Admin panel menu" title="Admin panel menu"></p><h4 id="list-of-products" tabindex="-1"><strong>List of Products</strong> <a class="header-anchor" href="#list-of-products" aria-label="Permalink to &quot;**List of Products**&quot;">​</a></h4><p><img src="https://raw.githubusercontent.com/EscolaLMS/Cart/main/docs/products-list.png" alt="List of Products" title="List of Products"></p><h4 id="creating-editing-product" tabindex="-1"><strong>Creating/editing Product</strong> <a class="header-anchor" href="#creating-editing-product" aria-label="Permalink to &quot;**Creating/editing Product**&quot;">​</a></h4><p><img src="https://raw.githubusercontent.com/EscolaLMS/Cart/main/docs/products-edit.png" alt="Creating/editing Product" title="Creating/editing Product"></p><h4 id="list-of-orders" tabindex="-1"><strong>List of Orders</strong> <a class="header-anchor" href="#list-of-orders" aria-label="Permalink to &quot;**List of Orders**&quot;">​</a></h4><p><img src="https://raw.githubusercontent.com/EscolaLMS/Cart/main/docs/orders-list.png" alt="List of Orders" title="List of Orders"></p><h4 id="details-of-order" tabindex="-1"><strong>Details of Order</strong> <a class="header-anchor" href="#details-of-order" aria-label="Permalink to &quot;**Details of Order**&quot;">​</a></h4><p><img src="https://raw.githubusercontent.com/EscolaLMS/Cart/main/docs/orders-details.png" alt="Details of Order" title="Details of Order"></p><h2 id="permissions" tabindex="-1">Permissions <a class="header-anchor" href="#permissions" aria-label="Permalink to &quot;Permissions&quot;">​</a></h2><p>Permissions are defined in <a href="https://github.com/EscolaLMS/Cart/tree/main/src/Enums/CartPermissionsEnum.php" target="_blank" rel="noreferrer">Enum</a> and seeded in <a href="database/seeders/CartPermissionSeeder.php">Seeder</a>.</p><h2 id="roadmap-todo-troubleshooting" tabindex="-1">Roadmap. Todo. Troubleshooting <a class="header-anchor" href="#roadmap-todo-troubleshooting" aria-label="Permalink to &quot;Roadmap. Todo. Troubleshooting&quot;">​</a></h2><ul><li>???</li></ul>',50),i=[s];function n(c,d,l,h,u,p){return a(),t("div",null,i)}const b=e(o,[["render",n]]);export{g as __pageData,b as default};
