import{_ as e,o as a,c as t,V as s}from"./chunks/framework.c495fe11.js";const b=JSON.parse('{"title":"Templates","description":"","frontmatter":{},"headers":[],"relativePath":"packages/templates.md","filePath":"packages/templates.md"}'),r={name:"packages/templates.md"},l=s('<h1 id="templates" tabindex="-1">Templates <a class="header-anchor" href="#templates" aria-label="Permalink to &quot;Templates&quot;">​</a></h1><p><a href="https://escolalms.github.io/Templates/" target="_blank" rel="noreferrer"><img src="https://img.shields.io/badge/documentation-swagger-green" alt="swagger"></a><a href="https://codecov.io/gh/EscolaLMS/Templates" target="_blank" rel="noreferrer"><img src="https://codecov.io/gh/EscolaLMS/Templates/branch/main/graph/badge.svg?token=NRAN4R8AGZ" alt="codecov"></a><a href="https://github.com/EscolaLMS/Templates/actions/workflows/test.yml" target="_blank" rel="noreferrer"><img src="https://github.com/EscolaLMS/Templates/actions/workflows/test.yml/badge.svg" alt="phpunit"></a><a href="https://packagist.org/packages/escolalms/templates" target="_blank" rel="noreferrer"><img src="https://img.shields.io/packagist/dt/escolalms/templates" alt="downloads"></a><a href="https://packagist.org/packages/escolalms/templates" target="_blank" rel="noreferrer"><img src="https://img.shields.io/packagist/v/escolalms/templates" alt="downloads"></a><a href="https://packagist.org/packages/escolalms/templates" target="_blank" rel="noreferrer"><img src="https://img.shields.io/packagist/l/escolalms/templates" alt="downloads"></a></p><h2 id="purpose" tabindex="-1">Purpose <a class="header-anchor" href="#purpose" aria-label="Permalink to &quot;Purpose&quot;">​</a></h2><p>General purpose of this package is to store various templates in database and assigning them to Events so that content based on these templates is automatically generated and/or sent to users.</p><h2 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-label="Permalink to &quot;Usage&quot;">​</a></h2><p>Each template is defined by</p><ul><li><code>channel</code>: class defining how the template is handled</li><li><code>event</code>: event to which the template is assigned</li></ul><p>For every channel &amp; event pair a single Variables definition is registered, which contains tokens that can be used in the template and replaced with values based on the data from the Event.</p><p>Analysing these three example files in <a href="https://github.com/EscolaLMS/Templates/tree/main/tests/Mock" target="_blank" rel="noreferrer">tests</a>:</p><ul><li>TestChannel.php</li><li>TestVariables.php</li><li>TestEventWithGetters.php</li></ul><p>and looking at the <code>Template</code> facade is simplest way to understand how this package works.</p><h3 id="facade" tabindex="-1">Facade <a class="header-anchor" href="#facade" aria-label="Permalink to &quot;Facade&quot;">​</a></h3><p>There is a <code>Template</code> facade declared, which is used to register Event-Channel-Variable sets and can be used in testing (as it can be replaced with a fake using <code>Template::fake()</code>).</p><p>To register Event-Channel-Variable set, <code>Template::register($eventClass, $channelClass, $variableClass)</code> must be called, where:</p><ul><li><code>$eventClass</code> can be any class that is dispatched as an event in any EscolaLms package</li><li><code>$channelClass</code> must be a class implementing <code>TemplateChannelContract</code> interface declared in this package</li><li><code>$variableClass</code> must be a class implementing <code>TemplateVariableContract</code> interface declared in this package</li></ul><h3 id="channels-variables" tabindex="-1">Channels &amp; variables <a class="header-anchor" href="#channels-variables" aria-label="Permalink to &quot;Channels &amp; variables&quot;">​</a></h3><p>This package has no Channels or Variables defined, everything should be created in separate packages.</p><ul><li><a href="https://github.com/EscolaLMS/Templates-Email" target="_blank" rel="noreferrer">Templates-Email</a></li><li><a href="https://github.com/EscolaLMS/Templates-Pdf" target="_blank" rel="noreferrer">Templates-Pdf</a></li><li><a href="https://github.com/EscolaLMS/Templates-SMS" target="_blank" rel="noreferrer">Templates-Sms</a></li></ul><h3 id="event-wrapper" tabindex="-1">Event Wrapper <a class="header-anchor" href="#event-wrapper" aria-label="Permalink to &quot;Event Wrapper&quot;">​</a></h3><p><code>EscolaLms\\Templates\\Events\\EventWrapper</code> is a class that wraps any event before trying to generate notification for it (and feed data from it to Template). This class contains methods for extracting necessary data from Event if that data is not available directly (for example User to which notification is being sent, and any other data that is required by registered Template).</p><h2 id="endpoints" tabindex="-1">Endpoints <a class="header-anchor" href="#endpoints" aria-label="Permalink to &quot;Endpoints&quot;">​</a></h2><p>All the endpoints are defined in <a href="https://escolalms.github.io/templates/" target="_blank" rel="noreferrer"><img src="https://img.shields.io/badge/documentation-swagger-green" alt="swagger"></a></p><h2 id="tests" tabindex="-1">Tests <a class="header-anchor" href="#tests" aria-label="Permalink to &quot;Tests&quot;">​</a></h2><p>Run <code>./vendor/bin/phpunit --filter &#39;EscolaLms\\\\Templates\\\\Tests&#39;</code> to run tests. See <a href="https://github.com/EscolaLMS/Templates/tree/main/tests" target="_blank" rel="noreferrer">tests</a> folder as it&#39;s quite good staring point as documentation appendix.</p><p>Test details: <a href="https://codecov.io/gh/EscolaLMS/Templates" target="_blank" rel="noreferrer"><img src="https://codecov.io/gh/EscolaLMS/Templates/branch/main/graph/badge.svg?token=NRAN4R8AGZ" alt="codecov"></a><a href="https://github.com/EscolaLMS/Templates/actions/workflows/test.yml" target="_blank" rel="noreferrer"><img src="https://github.com/EscolaLMS/Templates/actions/workflows/test.yml/badge.svg" alt="phpunit"></a></p><h2 id="listeners" tabindex="-1">Listeners <a class="header-anchor" href="#listeners" aria-label="Permalink to &quot;Listeners&quot;">​</a></h2><ul><li><code>EscolaLms\\Templates\\Listeners\\TemplateEventListener</code> this listeners listens to all <code>EscolaLms</code> namespace events, checks if event is registered for any Template, and passes the event wrapped in <code>EventWrapper</code> to processing (so if event is registered and has corresponding Template, notification using that Template will be sent)</li></ul><h2 id="permissions" tabindex="-1">Permissions <a class="header-anchor" href="#permissions" aria-label="Permalink to &quot;Permissions&quot;">​</a></h2><p>Permissions are defined in <a href="https://github.com/EscolaLMS/Templates/blob/main/src/Enums/TemplatesPermissionsEnum.php" target="_blank" rel="noreferrer">Enum</a> and seeded in <a href="https://github.com/EscolaLMS/Templates/blob/main/database/seeders/PermissionTableSeeder.php" target="_blank" rel="noreferrer">Seeder</a>.</p>',29),i=[l];function n(o,c,p,h,d,m){return a(),t("div",null,i)}const f=e(r,[["render",n]]);export{b as __pageData,f as default};
