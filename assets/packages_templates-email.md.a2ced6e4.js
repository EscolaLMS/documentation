import{_ as e,o as a,c as t,V as i}from"./chunks/framework.c495fe11.js";const u=JSON.parse('{"title":"Templates-Email","description":"","frontmatter":{},"headers":[],"relativePath":"packages/templates-email.md","filePath":"packages/templates-email.md"}'),s={name:"packages/templates-email.md"},l=i('<h1 id="templates-email" tabindex="-1">Templates-Email <a class="header-anchor" href="#templates-email" aria-label="Permalink to &quot;Templates-Email&quot;">​</a></h1><p>Package for email notifications with editable templates (for important user-related events)</p><p><a href="https://codecov.io/gh/EscolaLMS/Templates-Email" target="_blank" rel="noreferrer"><img src="https://codecov.io/gh/EscolaLMS/Templates-Email/branch/main/graph/badge.svg?token=O91FHNKI6R" alt="codecov"></a><a href="https://github.com/EscolaLMS/Templates-Email/actions/workflows/test.yml" target="_blank" rel="noreferrer"><img src="https://github.com/EscolaLMS/Templates-Email/actions/workflows/test.yml/badge.svg" alt="Tests PHPUnit in environments"></a><a href="https://codeclimate.com/github/EscolaLMS/Templates-Email/maintainability" target="_blank" rel="noreferrer"><img src="https://api.codeclimate.com/v1/badges/7d61484f7610611183ff/maintainability" alt="Maintainability"></a><a href="https://codeclimate.com/github/EscolaLMS/Templates-Email/test_coverage" target="_blank" rel="noreferrer"><img src="https://api.codeclimate.com/v1/badges/7d61484f7610611183ff/test_coverage" alt="Test Coverage"></a><a href="https://packagist.org/packages/escolalms/templates-email" target="_blank" rel="noreferrer"><img src="https://img.shields.io/packagist/dt/escolalms/templates-email" alt="downloads"></a><a href="https://packagist.org/packages/escolalms/templates-email" target="_blank" rel="noreferrer"><img src="https://img.shields.io/packagist/v/escolalms/templates-email" alt="downloads"></a><a href="https://packagist.org/packages/escolalms/templates-email" target="_blank" rel="noreferrer"><img src="https://img.shields.io/packagist/l/escolalms/templates-email" alt="downloads"></a></p><h2 id="purpose" tabindex="-1">Purpose <a class="header-anchor" href="#purpose" aria-label="Permalink to &quot;Purpose&quot;">​</a></h2><p>This package allows you to create email notifications for events emitted in Laravel app.</p><p>Each notification is created as a class describing available variables that can be used in Template (which will be created in database and editable through admin panel). This class must be registered using Template facade from Template package, where you specify which Event it is associated with and which Channel it is sent through (e.g. Email channel when defined in this package).</p><h2 id="installing" tabindex="-1">Installing <a class="header-anchor" href="#installing" aria-label="Permalink to &quot;Installing&quot;">​</a></h2><ul><li><code>composer require escolalms/templates-email</code></li><li><code>php artisan db:migrate</code></li><li><code>php artisan db:seed --class=&quot;EscolaLms\\TemplatesEmail\\Database\\Seeders\\TemplatesEmailSeeder&quot;</code></li></ul><h2 id="dependencies" tabindex="-1">Dependencies <a class="header-anchor" href="#dependencies" aria-label="Permalink to &quot;Dependencies&quot;">​</a></h2><ul><li><a href="https://mjml.io/" target="_blank" rel="noreferrer">MJML</a> - either as npm package (<a href="https://mjml.io/download" target="_blank" rel="noreferrer">Download</a>) or using API (<a href="https://mjml.io/api" target="_blank" rel="noreferrer">Register</a>)</li></ul><h2 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-label="Permalink to &quot;Usage&quot;">​</a></h2><h3 id="defining-templates" tabindex="-1">Defining Templates <a class="header-anchor" href="#defining-templates" aria-label="Permalink to &quot;Defining Templates&quot;">​</a></h3><ol><li>Create event which triggers sending email using specified template. This event must implement method getUser() returning User model from LMS Core package.</li><li>Create Class defining template variables, which you will use in email notification,</li><li>Associate your class describing template variables with event and channel through which notifications should be sent. Use <code>EscolaLms\\Templates\\Facades\\Template::register(Event class, EscolaLms\\TemplatesEmail\\Core\\EmailChannel::class, Variable class);</code></li><li>Register template in db for admin panel or used <code>/api/admin/templates</code>, better described in <a href="https://github.com/EscolaLMS/Templates" target="_blank" rel="noreferrer">Template package</a></li></ol><h3 id="mjml-pre-rendering" tabindex="-1">Mjml (pre)rendering <a class="header-anchor" href="#mjml-pre-rendering" aria-label="Permalink to &quot;Mjml (pre)rendering&quot;">​</a></h3><ol><li>Emails are written using MJML, which then is prerendered into HTML when saving a Template (so that sending an email does not call renderer for each message).</li><li>To render MJML you need to either: <ul><li>install <code>mjml</code> npm package and configure path to executable binary in this package config <code>binary_path</code> key</li><li>register to MJML API and configure api id &amp; secret in this package config file</li></ul></li></ol><h2 id="tests" tabindex="-1">Tests <a class="header-anchor" href="#tests" aria-label="Permalink to &quot;Tests&quot;">​</a></h2><p>Run <code>./vendor/bin/phpunit --filter &#39;EscolaLms\\\\TemplatesEmail\\\\Tests&#39;</code> to run tests. See <a href="https://github.com/EscolaLMS/Templates-Email/tree/main/tests" target="_blank" rel="noreferrer">tests</a> folder as it contains a basic implementation of Variable (or Template description) class with minimal customisation - a quite good starting point for creating your own.</p><p>Test details <a href="https://codecov.io/gh/EscolaLMS/Templates-Email" target="_blank" rel="noreferrer"><img src="https://codecov.io/gh/EscolaLMS/Templates-Email/branch/main/graph/badge.svg?token=O91FHNKI6R" alt="codecov"></a> <a href="https://github.com/EscolaLMS/Templates-Email/actions/workflows/test.yml" target="_blank" rel="noreferrer"><img src="https://github.com/EscolaLMS/Templates-Email/actions/workflows/test.yml/badge.svg" alt="Tests PHPUnit in environments"></a></p><h2 id="usage-on-front-end" tabindex="-1">Usage on front end <a class="header-anchor" href="#usage-on-front-end" aria-label="Permalink to &quot;Usage on front end&quot;">​</a></h2><h3 id="admin-panel" tabindex="-1">Admin panel <a class="header-anchor" href="#admin-panel" aria-label="Permalink to &quot;Admin panel&quot;">​</a></h3><h4 id="left-menu" tabindex="-1"><strong>Left menu</strong> <a class="header-anchor" href="#left-menu" aria-label="Permalink to &quot;**Left menu**&quot;">​</a></h4><p><img src="https://raw.githubusercontent.com/EscolaLMS/Templates-Email/main/docs/menu.png" alt="Menu" title="Menu"></p><h4 id="list-of-templates" tabindex="-1"><strong>List of templates</strong> <a class="header-anchor" href="#list-of-templates" aria-label="Permalink to &quot;**List of templates**&quot;">​</a></h4><p><img src="https://raw.githubusercontent.com/EscolaLMS/Templates-Email/main/docs/list.png" alt="List of templates" title="List of templates"></p><h4 id="creating-editing-template" tabindex="-1"><strong>Creating/editing template</strong> <a class="header-anchor" href="#creating-editing-template" aria-label="Permalink to &quot;**Creating/editing template**&quot;">​</a></h4><p><img src="https://raw.githubusercontent.com/EscolaLMS/Templates-Email/main/docs/edit.png" alt="Creating/editing template" title="Creating or editing template"></p><h2 id="permissions" tabindex="-1">Permissions <a class="header-anchor" href="#permissions" aria-label="Permalink to &quot;Permissions&quot;">​</a></h2><p>No Permissions defined for this package.</p><h2 id="roadmap-todo-troubleshooting" tabindex="-1">Roadmap. Todo. Troubleshooting <a class="header-anchor" href="#roadmap-todo-troubleshooting" aria-label="Permalink to &quot;Roadmap. Todo. Troubleshooting&quot;">​</a></h2><ul><li>???</li></ul>',30),r=[l];function o(n,m,c,p,h,d){return a(),t("div",null,r)}const f=e(s,[["render",o]]);export{u as __pageData,f as default};
