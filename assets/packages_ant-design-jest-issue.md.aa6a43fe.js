import{_ as s,o as n,c as a,V as o}from"./chunks/framework.c495fe11.js";const u=JSON.parse('{"title":"üí© Typescript/Jest error with AntDesign.Pro üí©","description":"","frontmatter":{},"headers":[],"relativePath":"packages/ant-design-jest-issue.md","filePath":"packages/ant-design-jest-issue.md"}'),l={name:"packages/ant-design-jest-issue.md"},p=o(`<h1 id="üí©-typescript-jest-error-with-antdesign-pro-üí©" tabindex="-1">üí© Typescript/Jest error with AntDesign.Pro üí© <a class="header-anchor" href="#üí©-typescript-jest-error-with-antdesign-pro-üí©" aria-label="Permalink to &quot;üí© Typescript/Jest error with AntDesign.Pro üí©&quot;">‚Äã</a></h1><blockquote><p>Jest does not support esm modules, and Ant Design uses them.</p></blockquote><p><a href="https://ant.design/docs/react/use-with-create-react-app#Test-with-Jest" target="_blank" rel="noreferrer">https://ant.design/docs/react/use-with-create-react-app#Test-with-Jest</a></p><h2 id="duplicating-the-issue" tabindex="-1">Duplicating THE issue <a class="header-anchor" href="#duplicating-the-issue" aria-label="Permalink to &quot;Duplicating THE issue&quot;">‚Äã</a></h2><p>See current status <a href="https://github.com/EscolaLMS/Ant-Design-Jest-Issue/actions/workflows/unit.yml" target="_blank" rel="noreferrer"><img src="https://github.com/EscolaLMS/Ant-Design-Jest-Issue/actions/workflows/unit.yml/badge.svg" alt="jest unit test"></a></p><p>Run <code>yarn test</code> that gets you into</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">FAIL</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">src/components/not-working/index.test.tsx</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">‚óè</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">suite</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">failed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">Jest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">encountered</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">an</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">unexpected</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">token</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">This</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">usually</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">means</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">that</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">you</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">are</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">trying</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">file</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">which</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Jest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cannot</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">parse,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">e.g.</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">it</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s not plain JavaScript.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C3E88D;">    By default, if Jest sees a Babel config, it will use that to transform your files, ignoring &quot;node_modules&quot;.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C3E88D;">    Here</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">what</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">you</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">can</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">do:</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#FFCB6B;">‚Ä¢</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">If</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">you</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">are</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">trying</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">use</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ECMAScript</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Modules,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">see</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://jestjs.io/docs/en/ecmascript-modules</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">how</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">enable</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">it.</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#FFCB6B;">‚Ä¢</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">To</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">have</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">some</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">your</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">node_modules</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">files</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">transformed,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">you</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">can</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">specify</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">custom</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">transformIgnorePatterns</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">your</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config.</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#FFCB6B;">‚Ä¢</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">If</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">you</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">need</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">custom</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">transformation</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">specify</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">transform</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">option</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">your</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config.</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#FFCB6B;">‚Ä¢</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">If</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">you</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">simply</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">want</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mock</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">your</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">non-JS</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">modules</span><span style="color:#A6ACCD;"> (e.g. </span><span style="color:#C3E88D;">binary</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">assets</span><span style="color:#A6ACCD;">) you can stub them out with the </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">moduleNameMapper</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> config option.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">You</span><span style="color:#FFCB6B;">&#39;ll find more details and examples of these config options in the docs:</span></span>
<span class="line"><span style="color:#FFCB6B;">    https://jestjs.io/docs/en/configuration.html</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">    Details:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">    /Users/qunabu/Desktop/localhost/escola-lms/ts-antd-jest-issue/node_modules/antd/es/layout/style/index.js:1</span></span>
<span class="line"><span style="color:#FFCB6B;">    ({&quot;Object.&lt;anonymous&gt;&quot;:function(module,exports,require,__dirname,__filename,global,jest){import &#39;</span><span style="color:#82AAFF;">.</span><span style="color:#A6ACCD;">./</span><span style="color:#82AAFF;">.</span><span style="color:#A6ACCD;">./style/index.less</span><span style="color:#FFCB6B;">&#39;;</span></span>
<span class="line"><span style="color:#FFCB6B;">                                                                                             ^^^^^^</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">    SyntaxError: Cannot use import statement outside a module</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1350:14)</span></span></code></pre></div><h1 id="üòí-üí©-üòí-üí©-üòí-üí©-üòí-üí©-üòí-üí©-üòí-üí©" tabindex="-1">üòí üí© üòí üí© üòí üí© üòí üí© üòí üí© üòí üí© <a class="header-anchor" href="#üòí-üí©-üòí-üí©-üòí-üí©-üòí-üí©-üòí-üí©-üòí-üí©" aria-label="Permalink to &quot;üòí üí© üòí üí© üòí üí© üòí üí© üòí üí© üòí üí©&quot;">‚Äã</a></h1><h2 id="solution" tabindex="-1">Solution <a class="header-anchor" href="#solution" aria-label="Permalink to &quot;Solution&quot;">‚Äã</a></h2><ul><li>fix this to work with <code>jest</code></li><li>find other js testing framework that generates covarage reports</li><li>all above is just for unit and integraion tests (e2e are fine)</li></ul>`,10),e=[p];function t(r,c,C,y,D,A){return n(),a("div",null,e)}const E=s(l,[["render",t]]);export{u as __pageData,E as default};
