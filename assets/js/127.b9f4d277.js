(window.webpackJsonp=window.webpackJsonp||[]).push([[127],{421:function(e,t,a){"use strict";a.r(t);var s=a(10),r=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"templates-email"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#templates-email"}},[e._v("#")]),e._v(" Templates-Email")]),e._v(" "),t("p",[e._v("Package for email notifications with editable templates (for important user-related events)")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://codecov.io/gh/EscolaLMS/Templates-Email",target:"_blank",rel:"noopener noreferrer"}},[t("img",{attrs:{src:"https://codecov.io/gh/EscolaLMS/Templates-Email/branch/main/graph/badge.svg?token=O91FHNKI6R",alt:"codecov"}}),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://github.com/EscolaLMS/Templates-Email/actions/workflows/test.yml",target:"_blank",rel:"noopener noreferrer"}},[t("img",{attrs:{src:"https://github.com/EscolaLMS/Templates-Email/actions/workflows/test.yml/badge.svg",alt:"Tests PHPUnit in environments"}}),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://codeclimate.com/github/EscolaLMS/Templates-Email/maintainability",target:"_blank",rel:"noopener noreferrer"}},[t("img",{attrs:{src:"https://api.codeclimate.com/v1/badges/7d61484f7610611183ff/maintainability",alt:"Maintainability"}}),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://codeclimate.com/github/EscolaLMS/Templates-Email/test_coverage",target:"_blank",rel:"noopener noreferrer"}},[t("img",{attrs:{src:"https://api.codeclimate.com/v1/badges/7d61484f7610611183ff/test_coverage",alt:"Test Coverage"}}),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://packagist.org/packages/escolalms/templates-email",target:"_blank",rel:"noopener noreferrer"}},[t("img",{attrs:{src:"https://img.shields.io/packagist/dt/escolalms/templates-email",alt:"downloads"}}),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://packagist.org/packages/escolalms/templates-email",target:"_blank",rel:"noopener noreferrer"}},[t("img",{attrs:{src:"https://img.shields.io/packagist/v/escolalms/templates-email",alt:"downloads"}}),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://packagist.org/packages/escolalms/templates-email",target:"_blank",rel:"noopener noreferrer"}},[t("img",{attrs:{src:"https://img.shields.io/packagist/l/escolalms/templates-email",alt:"downloads"}}),t("OutboundLink")],1)]),e._v(" "),t("h2",{attrs:{id:"purpose"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#purpose"}},[e._v("#")]),e._v(" Purpose")]),e._v(" "),t("p",[e._v("This package allows you to create email notifications for events emitted in Laravel app.")]),e._v(" "),t("p",[e._v("Each notification is created as a class describing available variables that can be used in Template (which will be created in database and editable through admin panel). This class must be registered using Template facade from Template package, where you specify which Event it is associated with and which Channel it is sent through (e.g. Email channel when defined in this package).")]),e._v(" "),t("h2",{attrs:{id:"installing"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#installing"}},[e._v("#")]),e._v(" Installing")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("composer require escolalms/templates-email")])]),e._v(" "),t("li",[t("code",[e._v("php artisan db:migrate")])]),e._v(" "),t("li",[t("code",[e._v('php artisan db:seed --class="EscolaLms\\TemplatesEmail\\Database\\Seeders\\TemplatesEmailSeeder"')])])]),e._v(" "),t("h2",{attrs:{id:"dependencies"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dependencies"}},[e._v("#")]),e._v(" Dependencies")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://mjml.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("MJML"),t("OutboundLink")],1),e._v(" - either as npm package ("),t("a",{attrs:{href:"https://mjml.io/download",target:"_blank",rel:"noopener noreferrer"}},[e._v("Download"),t("OutboundLink")],1),e._v(") or using API ("),t("a",{attrs:{href:"https://mjml.io/api",target:"_blank",rel:"noopener noreferrer"}},[e._v("Register"),t("OutboundLink")],1),e._v(")")])]),e._v(" "),t("h2",{attrs:{id:"usage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#usage"}},[e._v("#")]),e._v(" Usage")]),e._v(" "),t("h3",{attrs:{id:"defining-templates"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#defining-templates"}},[e._v("#")]),e._v(" Defining Templates")]),e._v(" "),t("ol",[t("li",[e._v("Create event which triggers sending email using specified template. This event must implement method getUser() returning User model from LMS Core package.")]),e._v(" "),t("li",[e._v("Create Class defining template variables, which you will use in email notification,")]),e._v(" "),t("li",[e._v("Associate your class describing template variables with event and channel through which notifications should be sent. Use "),t("code",[e._v("EscolaLms\\Templates\\Facades\\Template::register(Event class, EscolaLms\\TemplatesEmail\\Core\\EmailChannel::class, Variable class);")])]),e._v(" "),t("li",[e._v("Register template in db for admin panel or used "),t("code",[e._v("/api/admin/templates")]),e._v(", better described in "),t("a",{attrs:{href:"https://github.com/EscolaLMS/Templates",target:"_blank",rel:"noopener noreferrer"}},[e._v("Template package"),t("OutboundLink")],1)])]),e._v(" "),t("h3",{attrs:{id:"mjml-pre-rendering"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mjml-pre-rendering"}},[e._v("#")]),e._v(" Mjml (pre)rendering")]),e._v(" "),t("ol",[t("li",[e._v("Emails are written using MJML, which then is prerendered into HTML when saving a Template (so that sending an email does not call renderer for each message).")]),e._v(" "),t("li",[e._v("To render MJML you need to either:\n"),t("ul",[t("li",[e._v("install "),t("code",[e._v("mjml")]),e._v(" npm package and configure path to executable binary in this package config "),t("code",[e._v("binary_path")]),e._v(" key")]),e._v(" "),t("li",[e._v("register to MJML API and configure api id & secret in this package config file")])])])]),e._v(" "),t("h2",{attrs:{id:"tests"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tests"}},[e._v("#")]),e._v(" Tests")]),e._v(" "),t("p",[e._v("Run "),t("code",[e._v("./vendor/bin/phpunit --filter 'EscolaLms\\\\TemplatesEmail\\\\Tests'")]),e._v(" to run tests. See "),t("a",{attrs:{href:"https://github.com/EscolaLMS/Templates-Email/tree/main/tests",target:"_blank",rel:"noopener noreferrer"}},[e._v("tests"),t("OutboundLink")],1),e._v(" folder as it contains a basic implementation of Variable (or Template description) class with minimal customisation - a quite good starting point for creating your own.")]),e._v(" "),t("p",[e._v("Test details "),t("a",{attrs:{href:"https://codecov.io/gh/EscolaLMS/Templates-Email",target:"_blank",rel:"noopener noreferrer"}},[t("img",{attrs:{src:"https://codecov.io/gh/EscolaLMS/Templates-Email/branch/main/graph/badge.svg?token=O91FHNKI6R",alt:"codecov"}}),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://github.com/EscolaLMS/Templates-Email/actions/workflows/test.yml",target:"_blank",rel:"noopener noreferrer"}},[t("img",{attrs:{src:"https://github.com/EscolaLMS/Templates-Email/actions/workflows/test.yml/badge.svg",alt:"Tests PHPUnit in environments"}}),t("OutboundLink")],1)]),e._v(" "),t("h2",{attrs:{id:"usage-on-front-end"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#usage-on-front-end"}},[e._v("#")]),e._v(" Usage on front end")]),e._v(" "),t("h3",{attrs:{id:"admin-panel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#admin-panel"}},[e._v("#")]),e._v(" Admin panel")]),e._v(" "),t("h4",{attrs:{id:"left-menu"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#left-menu"}},[e._v("#")]),e._v(" "),t("strong",[e._v("Left menu")])]),e._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/EscolaLMS/Templates-Email/main/docs/menu.png",alt:"Menu",title:"Menu"}})]),e._v(" "),t("h4",{attrs:{id:"list-of-templates"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#list-of-templates"}},[e._v("#")]),e._v(" "),t("strong",[e._v("List of templates")])]),e._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/EscolaLMS/Templates-Email/main/docs/list.png",alt:"List of templates",title:"List of templates"}})]),e._v(" "),t("h4",{attrs:{id:"creating-editing-template"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#creating-editing-template"}},[e._v("#")]),e._v(" "),t("strong",[e._v("Creating/editing template")])]),e._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/EscolaLMS/Templates-Email/main/docs/edit.png",alt:"Creating/editing template",title:"Creating or editing template"}})]),e._v(" "),t("h2",{attrs:{id:"permissions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#permissions"}},[e._v("#")]),e._v(" Permissions")]),e._v(" "),t("p",[e._v("No Permissions defined for this package.")]),e._v(" "),t("h2",{attrs:{id:"roadmap-todo-troubleshooting"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#roadmap-todo-troubleshooting"}},[e._v("#")]),e._v(" Roadmap. Todo. Troubleshooting")]),e._v(" "),t("ul",[t("li",[e._v("???")])])])}),[],!1,null,null,null);t.default=r.exports}}]);