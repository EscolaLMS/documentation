(window.webpackJsonp=window.webpackJsonp||[]).push([[232],{656:function(e,t,a){"use strict";a.r(t);var s=a(65),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"templates"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#templates"}},[e._v("#")]),e._v(" Templates")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://escolalms.github.io/Templates/",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://img.shields.io/badge/documentation-swagger-green",alt:"swagger"}}),a("OutboundLink")],1),e._v(" "),a("a",{attrs:{href:"https://codecov.io/gh/EscolaLMS/Templates",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://codecov.io/gh/EscolaLMS/Templates/branch/main/graph/badge.svg?token=NRAN4R8AGZ",alt:"codecov"}}),a("OutboundLink")],1),e._v(" "),a("a",{attrs:{href:"https://github.com/EscolaLMS/Templates/actions/workflows/test.yml",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://github.com/EscolaLMS/Templates/actions/workflows/test.yml/badge.svg",alt:"phpunit"}}),a("OutboundLink")],1),e._v(" "),a("a",{attrs:{href:"https://packagist.org/packages/escolalms/templates",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://img.shields.io/packagist/dt/escolalms/templates",alt:"downloads"}}),a("OutboundLink")],1),e._v(" "),a("a",{attrs:{href:"https://packagist.org/packages/escolalms/templates",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://img.shields.io/packagist/v/escolalms/templates",alt:"downloads"}}),a("OutboundLink")],1),e._v(" "),a("a",{attrs:{href:"https://packagist.org/packages/escolalms/templates",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://img.shields.io/packagist/l/escolalms/templates",alt:"downloads"}}),a("OutboundLink")],1)]),e._v(" "),a("h2",{attrs:{id:"purpose"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#purpose"}},[e._v("#")]),e._v(" Purpose")]),e._v(" "),a("p",[e._v("General purpose of this package is to store various templates in database and assigning them to Events so that content based on these templates is automatically generated and/or sent to users.")]),e._v(" "),a("h2",{attrs:{id:"usage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usage"}},[e._v("#")]),e._v(" Usage")]),e._v(" "),a("p",[e._v("Each template is defined by")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("channel")]),e._v(": class defining how the template is handled")]),e._v(" "),a("li",[a("code",[e._v("event")]),e._v(": event to which the template is assigned")])]),e._v(" "),a("p",[e._v("For every channel & event pair a single Variables definition is registered, which contains tokens that can be used in the template and replaced with values based on the data from the Event.")]),e._v(" "),a("p",[e._v("Analysing these three example files in "),a("a",{attrs:{href:"tests/Mock"}},[e._v("tests")]),e._v(":")]),e._v(" "),a("ul",[a("li",[e._v("TestChannel.php")]),e._v(" "),a("li",[e._v("TestVariables.php")]),e._v(" "),a("li",[e._v("TestEventWithGetters.php")])]),e._v(" "),a("p",[e._v("and looking at the "),a("code",[e._v("Template")]),e._v(" facade is simplest way to understand how this package works.")]),e._v(" "),a("h3",{attrs:{id:"facade"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#facade"}},[e._v("#")]),e._v(" Facade")]),e._v(" "),a("p",[e._v("There is a "),a("code",[e._v("Template")]),e._v(" facade declared, which is used to register Event-Channel-Variable sets and can be used in testing (as it can be replaced with a fake using "),a("code",[e._v("Template::fake()")]),e._v(").")]),e._v(" "),a("p",[e._v("To register Event-Channel-Variable set, "),a("code",[e._v("Template::register($eventClass, $channelClass, $variableClass)")]),e._v(" must be called, where:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("$eventClass")]),e._v(" can be any class that is dispatched as an event in any EscolaLms package")]),e._v(" "),a("li",[a("code",[e._v("$channelClass")]),e._v(" must be a class implementing "),a("code",[e._v("TemplateChannelContract")]),e._v(" interface declared in this package")]),e._v(" "),a("li",[a("code",[e._v("$variableClass")]),e._v(" must be a class implementing "),a("code",[e._v("TemplateVariableContract")]),e._v(" interface declared in this package")])]),e._v(" "),a("h3",{attrs:{id:"channels-variables"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#channels-variables"}},[e._v("#")]),e._v(" Channels & variables")]),e._v(" "),a("p",[e._v("This package has no Channels or Variables defined, everything should be created in separate packages.")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/EscolaLMS/Templates-Email",target:"_blank",rel:"noopener noreferrer"}},[e._v("Templates-Email"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/EscolaLMS/Templates-Certificates",target:"_blank",rel:"noopener noreferrer"}},[e._v("Templates-Certificates"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/EscolaLMS/Templates-Pdf",target:"_blank",rel:"noopener noreferrer"}},[e._v("Templates-Pdf"),a("OutboundLink")],1)])]),e._v(" "),a("h3",{attrs:{id:"event-wrapper"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#event-wrapper"}},[e._v("#")]),e._v(" Event Wrapper")]),e._v(" "),a("p",[a("code",[e._v("EscolaLms\\Templates\\Events\\EventWrapper")]),e._v(" is a class that wraps any event before trying to generate notification for it (and feed data from it to Template). This class contains methods for extracting necessary data from Event if that data is not available directly (for example User to which notification is being sent, and any other data that is required by registered Template).")]),e._v(" "),a("h2",{attrs:{id:"endpoints"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#endpoints"}},[e._v("#")]),e._v(" Endpoints")]),e._v(" "),a("p",[e._v("All the endpoints are defined in "),a("a",{attrs:{href:"https://escolalms.github.io/templates/",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://img.shields.io/badge/documentation-swagger-green",alt:"swagger"}}),a("OutboundLink")],1)]),e._v(" "),a("h2",{attrs:{id:"tests"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tests"}},[e._v("#")]),e._v(" Tests")]),e._v(" "),a("p",[e._v("Run "),a("code",[e._v("./vendor/bin/phpunit --filter 'EscolaLms\\\\Templates\\\\Tests'")]),e._v(" to run tests. See "),a("a",{attrs:{href:"tests"}},[e._v("tests")]),e._v(" folder as it's quite good staring point as documentation appendix.")]),e._v(" "),a("p",[e._v("Test details:\n"),a("a",{attrs:{href:"https://codecov.io/gh/EscolaLMS/Templates",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://codecov.io/gh/EscolaLMS/Templates/branch/main/graph/badge.svg?token=NRAN4R8AGZ",alt:"codecov"}}),a("OutboundLink")],1),e._v(" "),a("a",{attrs:{href:"https://github.com/EscolaLMS/Templates/actions/workflows/test.yml",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://github.com/EscolaLMS/Templates/actions/workflows/test.yml/badge.svg",alt:"phpunit"}}),a("OutboundLink")],1)]),e._v(" "),a("h2",{attrs:{id:"listeners"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#listeners"}},[e._v("#")]),e._v(" Listeners")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("EscolaLms\\Templates\\Listeners\\TemplateEventListener")]),e._v(" this listeners listens to all "),a("code",[e._v("EscolaLms")]),e._v(" namespace events, checks if event is registered for any Template, and passes the event wrapped in "),a("code",[e._v("EventWrapper")]),e._v(" to processing (so if event is registered and has corresponding Template, notification using that Template will be sent)")])]),e._v(" "),a("h2",{attrs:{id:"usage-on-front-end"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usage-on-front-end"}},[e._v("#")]),e._v(" Usage on front end")]),e._v(" "),a("h3",{attrs:{id:"admin-panel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#admin-panel"}},[e._v("#")]),e._v(" Admin panel")]),e._v(" "),a("p",[e._v("These screens will only be available if at least one Template is registered (for example any package implementing Channel and Variables is installed).")]),e._v(" "),a("h4",{attrs:{id:"left-menu"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#left-menu"}},[e._v("#")]),e._v(" "),a("strong",[e._v("Left menu")])]),e._v(" "),a("p",[a("img",{attrs:{src:"docs/templates/menu.png",alt:"Menu",title:"Menu"}})]),e._v(" "),a("h4",{attrs:{id:"list-of-templates"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#list-of-templates"}},[e._v("#")]),e._v(" "),a("strong",[e._v("List of templates")])]),e._v(" "),a("p",[a("img",{attrs:{src:"docs/templates/list.png",alt:"List of templates",title:"List of templates"}})]),e._v(" "),a("h4",{attrs:{id:"creating-editing-template"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#creating-editing-template"}},[e._v("#")]),e._v(" "),a("strong",[e._v("Creating/editing template")])]),e._v(" "),a("p",[a("img",{attrs:{src:"docs/templates/edit.png",alt:"Creating/editing template",title:"Creating or editing template"}})]),e._v(" "),a("h2",{attrs:{id:"permissions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#permissions"}},[e._v("#")]),e._v(" Permissions")]),e._v(" "),a("p",[e._v("Permissions are defined in "),a("a",{attrs:{href:"https://github.com/EscolaLMS/Templates/blob/main/src/Enums/TemplatesPermissionsEnum.php",target:"_blank",rel:"noopener noreferrer"}},[e._v("Enum"),a("OutboundLink")],1),e._v(" and seeded in "),a("a",{attrs:{href:"https://github.com/EscolaLMS/Templates/blob/main/database/seeders/PermissionTableSeeder.php",target:"_blank",rel:"noopener noreferrer"}},[e._v("Seeder"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("h2",{attrs:{id:"roadmap-todo-troubleshooting"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#roadmap-todo-troubleshooting"}},[e._v("#")]),e._v(" Roadmap. Todo. Troubleshooting")]),e._v(" "),a("ul",[a("li",[e._v("???")])])])}),[],!1,null,null,null);t.default=r.exports}}]);