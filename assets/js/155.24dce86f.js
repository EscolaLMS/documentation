(window.webpackJsonp=window.webpackJsonp||[]).push([[155],{449:function(a,e,t){"use strict";t.r(e);var s=t(10),r=Object(s.a)({},(function(){var a=this,e=a._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"template-of-escola-lms-packages"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#template-of-escola-lms-packages"}},[a._v("#")]),a._v(" Template of Escola LMS Packages")]),a._v(" "),e("p",[a._v("Each Escola LMS package should contain")]),a._v(" "),e("ol",[e("li",[a._v("Licence MIT")]),a._v(" "),e("li",[a._v("Definitions of Tests as Github Actions")]),a._v(" "),e("li",[a._v("codecov Tests CodeCoverage")]),a._v(" "),e("li",[a._v("Readme file")]),a._v(" "),e("li",[a._v("Codeclimate (quality & cc)")]),a._v(" "),e("li",[a._v("GitGuardian")]),a._v(" "),e("li",[a._v("Badges")])]),a._v(" "),e("h2",{attrs:{id:"laravel-php-package"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#laravel-php-package"}},[a._v("#")]),a._v(" Laravel PHP Package")]),a._v(" "),e("p",[a._v("Each Escola LMS Laravel PHP Package should contain")]),a._v(" "),e("ol",[e("li",[a._v("PhpUnit tests for L8, mysql, postgres, php7.4 & php8.0. Test are launched with "),e("a",{attrs:{href:"https://github.com/orchestral/testbench",target:"_blank",rel:"noopener noreferrer"}},[a._v("testbench"),e("OutboundLink")],1)]),a._v(" "),e("li",[a._v("PhpUnit with code covarage uploaded to codecov and codeclimate")]),a._v(" "),e("li",[a._v("Swagger documentation as github pages.")])]),a._v(" "),e("p",[a._v("All this are in "),e("a",{attrs:{href:"https://github.com/EscolaLMS/GH-Actions-Template/tree/main/php",target:"_blank",rel:"noopener noreferrer"}},[a._v("php"),e("OutboundLink")],1),a._v(" folder. To enable above just copy files to your package and change settings.")]),a._v(" "),e("h2",{attrs:{id:"swagger-generation-to-github-pages"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#swagger-generation-to-github-pages"}},[a._v("#")]),a._v(" Swagger generation to Github pages")]),a._v(" "),e("p",[a._v("Each API package should publish it's own swagger documentation, yet is should not have "),e("code",[a._v('@OA\\Info(title=\\"EscolaLMS\\", version=\\"0.0.1\\")')]),a._v(" in base controller because the there can be only one "),e("code",[a._v("@OA\\Info")]),a._v(" globally.")]),a._v(" "),e("p",[a._v("We have one general repository for "),e("a",{attrs:{href:"https://github.com/EscolaLMS/API",target:"_blank",rel:"noopener noreferrer"}},[a._v("API"),e("OutboundLink")],1),a._v(" that generates one swagger documentation from all packages.")]),a._v(" "),e("p",[a._v("To generate swagger for repository please instead of "),e("code",[a._v("@OA\\Info")]),a._v(" add "),e("code",[a._v("SWAGGER_VERSION")]),a._v(" string then replace it in "),e("code",[a._v("yml")]),a._v(" Github action, eg")]),a._v(" "),e("div",{staticClass:"language-yml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yml"}},[e("code",[a._v("      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" add Swagger main annotaion\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("run")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" php "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("r \"file_put_contents('src/HeadlessH5PServiceProvider.php'"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" str_replace('SWAGGER_VERSION'"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('\'@OA\\Info(title=\\"EscolaLMS\\", version=\\"0.0.1\\")\'')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" file_get_contents('src/HeadlessH5PServiceProvider.php')));\"\n")])])]),e("h3",{attrs:{id:"how-to-use-this-as-package"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-use-this-as-package"}},[a._v("#")]),a._v(" How to use this as package.")]),a._v(" "),e("p",[a._v("Repeat those steps for each package")]),a._v(" "),e("ol",[e("li",[e("p",[a._v("Clone your package to a folder inside this repo, in "),e("code",[a._v("packages")]),a._v(" folder ("),e("code",[a._v("git clone XXX package")]),a._v("). Add your folder to "),e("code",[a._v(".gitignore")])])]),a._v(" "),e("li",[e("p",[a._v("Amend Host Laravel "),e("code",[a._v("composer.json")])])])]),a._v(" "),e("p",[a._v("Before:")]),a._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"repositories"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),e("p",[a._v("After:")]),a._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"repositories"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"escolalms/headless-h5p"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"type"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"path"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"url"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"../packages/headless-h5p"')]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),e("p",[a._v("Example with 2 packages")]),a._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"repositories"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"escolalms/headless-h5p"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"type"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"path"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"url"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"../packages/headless-h5p"')]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"escolalms/courses"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"type"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"path"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"url"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"../packages/courses"')]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),e("p",[a._v("Working with packages "),e("code",[a._v("versions")])]),a._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"repositories"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"type"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"path"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"escolalms/courses"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"url"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"packages/courses"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"options"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"versions"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"escolalms/courses"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0.2.20"')]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),e("p",[a._v("Note that name ("),e("code",[a._v("escolalms/headless-h5p")]),a._v(" in example above) "),e("strong",[a._v("MUST")]),a._v(" match one you have in "),e("code",[a._v("package/composer.json")])]),a._v(" "),e("p",[a._v("2.1. (Optional)\nIn case you'll be generating your own swagger documentation you might want to alter "),e("code",[a._v("host/config/l5-swagger.php")]),a._v(" as follows:")]),a._v(" "),e("p",[a._v("Before:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("'annotations' => [\n               base_path('vendor/escolalms/headless-h5p/src'),\n               //base_path('app')\n],\n")])])]),e("p",[a._v("After:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("'annotations' => [\n               base_path('vendor/escolalms/mypackage/src'),\n               //base_path('app')\n],\n")])])]),e("p",[a._v("Above example is assuming that your package name is "),e("code",[a._v("mypackage")]),a._v(".")]),a._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[a._v("Enter bash (instruction above), then add you packge with "),e("code",[a._v("composer require escolalms/headless-h5p")])])]),a._v(" "),e("p",[a._v("That's it - now you have laravel working with docker that is using package from other folder that is "),e("code",[a._v("git")]),a._v(" maintained.")]),a._v(" "),e("h2",{attrs:{id:"xdebug-remote-debbuging"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#xdebug-remote-debbuging"}},[a._v("#")]),a._v(" Xdebug remote debbuging")]),a._v(" "),e("p",[e("em",[a._v("Note")]),a._v(" instruction below is for VSCODE, yet it should work with minor changes in other IDEs like PHPStorm.")]),a._v(" "),e("ol",[e("li",[a._v("Add mapping to "),e("code",[a._v(".vscode/launch.json")])])]),a._v(" "),e("p",[a._v("Before:")]),a._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[a._v("    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"configurations"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Listen for Xdebug"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"type"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"php"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"request"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"launch"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"port"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("9003")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"pathMappings"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"/var/www/html"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"${workspaceFolder}/host"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n")])])]),e("p",[a._v("After:")]),a._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[a._v("    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"configurations"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Listen for Xdebug"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"type"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"php"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"request"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"launch"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"port"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("9003")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"pathMappings"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"/var/www/html"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"${workspaceFolder}/host"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"/var/www/package"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"${workspaceFolder}/package"')]),a._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n")])])]),e("h2",{attrs:{id:"react-components-package"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#react-components-package"}},[a._v("#")]),a._v(" React components package")]),a._v(" "),e("p",[a._v("TODO")]),a._v(" "),e("h2",{attrs:{id:"admin-panel"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#admin-panel"}},[a._v("#")]),a._v(" Admin panel")]),a._v(" "),e("p",[a._v("TODO")]),a._v(" "),e("h2",{attrs:{id:"api-laravel-packages"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#api-laravel-packages"}},[a._v("#")]),a._v(" API Laravel packages")]),a._v(" "),e("ul",[e("li",[e("code",[a._v("main")]),a._v(" branch as main branch 😃 do not use "),e("code",[a._v("develop")]),a._v(" branch")]),a._v(" "),e("li",[e("code",[a._v("feature/X")]),a._v(" as feature branch "),e("code",[a._v("X")]),a._v(" is number of issue in Gh Issues of repository")]),a._v(" "),e("li",[a._v("after MVP, use "),e("code",[a._v("release/X")]),a._v(" branch")]),a._v(" "),e("li",[a._v("phpunit tests run by github actions (definitions in this repository)")]),a._v(" "),e("li",[a._v("phpunit code coverage pushed to https://codecov.io/gh")]),a._v(" "),e("li",[a._v("swagger documention push to github pages")]),a._v(" "),e("li",[a._v("repository registered to packagist in "),e("code",[a._v("escolalms/*")]),a._v(" namespace with versioning in tag releases")]),a._v(" "),e("li",[a._v("badges: codecov, pipeline status, packagist downloads, packagist latest version, licence")]),a._v(" "),e("li",[a._v("all packages should be attached to "),e("a",{attrs:{href:"https://github.com/EscolaLMS/API",target:"_blank",rel:"noopener noreferrer"}},[a._v("main API"),e("OutboundLink")],1),a._v(" repository as composer dependency")]),a._v(" "),e("li",[a._v("codeclimate for Static analys")])]),a._v(" "),e("p",[a._v("Classes (and files) that should be inside the package")]),a._v(" "),e("ul",[e("li",[a._v("service provider")]),a._v(" "),e("li",[a._v("policy with auth provider")]),a._v(" "),e("li",[a._v("seeder for permissions for "),e("a",{attrs:{href:"https://github.com/EscolaLMS/Core/blob/main/src/Enums/UserRole.php",target:"_blank",rel:"noopener noreferrer"}},[a._v("default roles"),e("OutboundLink")],1)]),a._v(" "),e("li",[a._v("seeder for default content")]),a._v(" "),e("li",[a._v("tests")]),a._v(" "),e("li",[a._v("swagger annotations")]),a._v(" "),e("li",[a._v("readme.md with implementation details")])]),a._v(" "),e("h3",{attrs:{id:"badges-example"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#badges-example"}},[a._v("#")]),a._v(" Badges example")]),a._v(" "),e("div",{staticClass:"language-markdown extra-class"},[e("pre",{pre:!0,attrs:{class:"language-markdown"}},[e("code",[e("span",{pre:!0,attrs:{class:"token url"}},[a._v("["),e("span",{pre:!0,attrs:{class:"token content"}},[a._v("![swagger")]),a._v("]("),e("span",{pre:!0,attrs:{class:"token url"}},[a._v("https://img.shields.io/badge/documentation-swagger-green")]),a._v(")")]),a._v("](https://escolalms.github.io/Auth/)\n"),e("span",{pre:!0,attrs:{class:"token url"}},[a._v("["),e("span",{pre:!0,attrs:{class:"token content"}},[a._v("![codecov")]),a._v("]("),e("span",{pre:!0,attrs:{class:"token url"}},[a._v("https://codecov.io/gh/EscolaLMS/Auth/branch/main/graph/badge.svg?token=O91FHNKI6R")]),a._v(")")]),a._v("](https://codecov.io/gh/EscolaLMS/Auth)\n"),e("span",{pre:!0,attrs:{class:"token url"}},[a._v("["),e("span",{pre:!0,attrs:{class:"token content"}},[a._v("![phpunit")]),a._v("]("),e("span",{pre:!0,attrs:{class:"token url"}},[a._v("https://github.com/EscolaLMS/Auth/actions/workflows/test.yml/badge.svg")]),a._v(")")]),a._v("](https://github.com/EscolaLMS/Core/actions/workflows/test.yml)\n"),e("span",{pre:!0,attrs:{class:"token url"}},[a._v("["),e("span",{pre:!0,attrs:{class:"token content"}},[a._v("![downloads")]),a._v("]("),e("span",{pre:!0,attrs:{class:"token url"}},[a._v("https://img.shields.io/packagist/dt/escolalms/auth")]),a._v(")")]),a._v("](https://packagist.org/packages/escolalms/auth)\n"),e("span",{pre:!0,attrs:{class:"token url"}},[a._v("["),e("span",{pre:!0,attrs:{class:"token content"}},[a._v("![downloads")]),a._v("]("),e("span",{pre:!0,attrs:{class:"token url"}},[a._v("https://img.shields.io/packagist/v/escolalms/auth")]),a._v(")")]),a._v("](https://packagist.org/packages/escolalms/auth)\n"),e("span",{pre:!0,attrs:{class:"token url"}},[a._v("["),e("span",{pre:!0,attrs:{class:"token content"}},[a._v("![downloads")]),a._v("]("),e("span",{pre:!0,attrs:{class:"token url"}},[a._v("https://img.shields.io/packagist/l/escolalms/auth")]),a._v(")")]),a._v("](https://packagist.org/packages/escolalms/auth)\n")])])]),e("h3",{attrs:{id:"authorisation-with-testing"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#authorisation-with-testing"}},[a._v("#")]),a._v(" Authorisation (with Testing)")]),a._v(" "),e("p",[a._v("TODO")]),a._v(" "),e("h2",{attrs:{id:"permissions-naming-pattern"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#permissions-naming-pattern"}},[a._v("#")]),a._v(" Permissions naming pattern")]),a._v(" "),e("p",[a._v("Basic pattern:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("[package-name?]_[model-name]_[action-name]_[modifier-name?]\n")])])]),e("p",[a._v("Sections are merged with "),e("code",[a._v("_")])]),a._v(" "),e("p",[a._v("Multi-part names are merged with "),e("code",[a._v("-")])]),a._v(" "),e("hr"),a._v(" "),e("h3",{attrs:{id:"packagename"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#packagename"}},[a._v("#")]),a._v(" PackageName")]),a._v(" "),e("p",[e("code",[a._v("package-name")]),a._v(" is the name of the repository to which the permission applies.")]),a._v(" "),e("p",[a._v("example:\nfor "),e("code",[a._v("EscolaLMS/Cart")]),a._v(" -> "),e("code",[a._v("cart")])]),a._v(" "),e("h4",{attrs:{id:"when-we-omit-the-package-name"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#when-we-omit-the-package-name"}},[a._v("#")]),a._v(" When we omit the "),e("code",[a._v("package-name")]),a._v(":")]),a._v(" "),e("h5",{attrs:{id:"_1-when-the-package-name-is-named-the-same-as-the-model"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-when-the-package-name-is-named-the-same-as-the-model"}},[a._v("#")]),a._v(" 1. When the package name is named the same as the model")]),a._v(" "),e("p",[a._v("e.g. "),e("code",[a._v("EscolaLMS/Categories")]),a._v(".")]),a._v(" "),e("p",[a._v("According to the basic pattern it would look like this:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("categories_category_create // wrong\n")])])]),e("p",[a._v("This does not make sense, so we omit the package name and create")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("category_create // good\n")])])]),e("h5",{attrs:{id:"_2-to-not-bind-the-permission-too-much-to-the-repository"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-to-not-bind-the-permission-too-much-to-the-repository"}},[a._v("#")]),a._v(" 2. To not bind the permission too much to the repository")]),a._v(" "),e("p",[a._v("This gives a gateway to split the repository.")]),a._v(" "),e("p",[a._v("e.g.\nUser management is currently in the "),e("code",[a._v("EscolaLMS/Auth")]),a._v(" package.\nAccording to the basic pattern, the permission to create a user would look like this:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("auth_user_create // wrong\n")])])]),e("p",[a._v("In this case, it is worth omitting "),e("code",[a._v("auth")]),a._v(" and eventually doing")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("user_create // good\n")])])]),e("hr"),a._v(" "),e("h3",{attrs:{id:"modelname"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#modelname"}},[a._v("#")]),a._v(" ModelName")]),a._v(" "),e("p",[e("code",[a._v("model-name")]),a._v(" the name of the model/element that the action applies to. Always specify the model in the singular:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("user-groups_create // wrong\nuser-groups_list // wrong\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("user-group_create // good\nuser-group_list // good\n")])])]),e("hr"),a._v(" "),e("h3",{attrs:{id:"actionname"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#actionname"}},[a._v("#")]),a._v(" ActionName")]),a._v(" "),e("p",[e("code",[a._v("action-name")]),a._v(" is the name of the action we want to allow.")]),a._v(" "),e("h4",{attrs:{id:"standard-action-names"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#standard-action-names"}},[a._v("#")]),a._v(" Standard action names:")]),a._v(" "),e("p",[e("code",[a._v("create")]),a._v(" - create model (do not use "),e("code",[a._v("add")]),a._v(" in this case)")]),a._v(" "),e("p",[e("code",[a._v("read")]),a._v(" - read a model (do not use "),e("code",[a._v("attend")]),a._v(", "),e("code",[a._v("display")]),a._v(", "),e("code",[a._v("show")]),a._v(" in this case)")]),a._v(" "),e("p",[e("code",[a._v("update")]),a._v(" - edit the model (do not use "),e("code",[a._v("edit")]),a._v(" in this case)")]),a._v(" "),e("p",[e("code",[a._v("delete")]),a._v(" - deleting a model (do not use "),e("code",[a._v("remove")]),a._v(" in this case)")]),a._v(" "),e("p",[e("code",[a._v("list")]),a._v(" - read the list of the given model")]),a._v(" "),e("p",[e("code",[a._v("manage")]),a._v(" - when a general model management permission is needed that combines "),e("code",[a._v("create")]),a._v(", "),e("code",[a._v("read")]),a._v(", "),e("code",[a._v("update")]),a._v(" and "),e("code",[a._v("delete")])]),a._v(" "),e("h4",{attrs:{id:"actions-on-a-model-in-a-model"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#actions-on-a-model-in-a-model"}},[a._v("#")]),a._v(" Actions on a model in a model:")]),a._v(" "),e("p",[a._v("In some cases we need permission to create relationships between models.")]),a._v(" "),e("p",[a._v("We need to determine which model is the master model, and we put the sub-model into an action. Sub-model in the action is given as the first one, the proper action as the second one., e.g:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("user-group_member-add // good\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("user-group_add-member // wrong\n")])])]),e("hr"),a._v(" "),e("h3",{attrs:{id:"modifiername"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#modifiername"}},[a._v("#")]),a._v(" ModifierName")]),a._v(" "),e("p",[e("code",[a._v("modifier-name")]),a._v(" is a modifier for the action. It is used when the action is used in a non-standard way.")]),a._v(" "),e("p",[a._v("Example:\n"),e("code",[a._v("user_update")]),a._v(" vs "),e("code",[a._v("user_update_self")]),a._v("\nBoth permissions allow you to edit a user, but in the second case you can only edit your own user (not any user).")]),a._v(" "),e("h4",{attrs:{id:"model-in-modifier"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#model-in-modifier"}},[a._v("#")]),a._v(" Model in modifier:")]),a._v(" "),e("p",[a._v("Sometimes we need a permission for an action that depends on another model.")]),a._v(" "),e("p",[a._v("Example:\nWe are the author of the course. We need a list of users who have joined it. We don't have permission to view all users (standard "),e("code",[a._v("user_list")]),a._v(" is out).")]),a._v(" "),e("p",[a._v("You can do it like this for example:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("user_list_course-owned\n")])])]),e("p",[a._v("The subModel in the modifier is given first, the proper modifier second.")]),a._v(" "),e("p",[e("strong",[a._v("If you need more than one modifier in a given permission, you should consider whether the permission you are creating should be split.")])]),a._v(" "),e("h4",{attrs:{id:"avoid-modifiers-whenever-possible"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#avoid-modifiers-whenever-possible"}},[a._v("#")]),a._v(" Avoid modifiers whenever possible:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("user_list_any // wrong\nuser_list // good\n")])])]),e("h4",{attrs:{id:"standard-modifiers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#standard-modifiers"}},[a._v("#")]),a._v(" Standard modifiers:")]),a._v(" "),e("p",[e("code",[a._v("self")]),a._v(" - for user-related actions (e.g. "),e("code",[a._v("user_update_self")]),a._v(", "),e("code",[a._v("user-group_update_self")]),a._v(")")]),a._v(" "),e("hr"),a._v(" "),e("h3",{attrs:{id:"permissions-for-views-in-admin-panel"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#permissions-for-views-in-admin-panel"}},[a._v("#")]),a._v(" Permissions for views in admin panel:")]),a._v(" "),e("p",[e("strong",[a._v("PackageName")]),a._v(" - must be "),e("code",[a._v("dashboard-app")])]),a._v(" "),e("p",[e("strong",[a._v("ModelName")]),a._v(" - this is the name of the section or whole subpage")]),a._v(" "),e("p",[e("strong",[a._v("ActionName")]),a._v(" - usually it will be simply "),e("code",[a._v("access")])]),a._v(" "),e("p",[a._v("Example:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("dashboad-app_course-list_access\n")])])]),e("hr"),a._v(" "),e("h3",{attrs:{id:"permissions-for-views-in-the-client-front-application"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#permissions-for-views-in-the-client-front-application"}},[a._v("#")]),a._v(" Permissions for views in the client (front) application:")]),a._v(" "),e("p",[e("strong",[a._v("PackageName")]),a._v(" - must be "),e("code",[a._v("client-app")])]),a._v(" "),e("p",[e("strong",[a._v("ModelName")]),a._v(" - is the name of the section or the whole subpage")]),a._v(" "),e("p",[e("strong",[a._v("ActionName")]),a._v(" - usually it will be simply "),e("code",[a._v("access")])]),a._v(" "),e("p",[a._v("Example:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("client-app_course-list_access\n")])])])])}),[],!1,null,null,null);e.default=r.exports}}]);