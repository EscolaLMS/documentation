<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Image processing module | Technical documentation of Wellms</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Technical documentation of Wellms ">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/documentation/assets/css/0.styles.fdb13168.css" as="style"><link rel="preload" href="/documentation/assets/js/app.9a281ed1.js" as="script"><link rel="preload" href="/documentation/assets/js/2.04ee873f.js" as="script"><link rel="preload" href="/documentation/assets/js/200.0b46be3d.js" as="script"><link rel="prefetch" href="/documentation/assets/js/10.0ea0b575.js"><link rel="prefetch" href="/documentation/assets/js/100.b6cc1ca9.js"><link rel="prefetch" href="/documentation/assets/js/101.dc861b17.js"><link rel="prefetch" href="/documentation/assets/js/102.ca4f51f7.js"><link rel="prefetch" href="/documentation/assets/js/103.2eba4f93.js"><link rel="prefetch" href="/documentation/assets/js/104.07135788.js"><link rel="prefetch" href="/documentation/assets/js/105.dcdd4db5.js"><link rel="prefetch" href="/documentation/assets/js/106.5075a357.js"><link rel="prefetch" href="/documentation/assets/js/107.b3bf0aae.js"><link rel="prefetch" href="/documentation/assets/js/108.f31ec41a.js"><link rel="prefetch" href="/documentation/assets/js/109.594bc769.js"><link rel="prefetch" href="/documentation/assets/js/11.438a7870.js"><link rel="prefetch" href="/documentation/assets/js/110.d4161a33.js"><link rel="prefetch" href="/documentation/assets/js/111.a97a2c1c.js"><link rel="prefetch" href="/documentation/assets/js/112.a5c6df81.js"><link rel="prefetch" href="/documentation/assets/js/113.8d63e3ed.js"><link rel="prefetch" href="/documentation/assets/js/114.70843667.js"><link rel="prefetch" href="/documentation/assets/js/115.c803b543.js"><link rel="prefetch" href="/documentation/assets/js/116.50eb5481.js"><link rel="prefetch" href="/documentation/assets/js/117.e7923d71.js"><link rel="prefetch" href="/documentation/assets/js/118.bf49d8a7.js"><link rel="prefetch" href="/documentation/assets/js/119.39059949.js"><link rel="prefetch" href="/documentation/assets/js/12.3bd3e26f.js"><link rel="prefetch" href="/documentation/assets/js/120.5956000d.js"><link rel="prefetch" href="/documentation/assets/js/121.00a1e164.js"><link rel="prefetch" href="/documentation/assets/js/122.0051e975.js"><link rel="prefetch" href="/documentation/assets/js/123.78eb97d4.js"><link rel="prefetch" href="/documentation/assets/js/124.df19836a.js"><link rel="prefetch" href="/documentation/assets/js/125.a233a7cf.js"><link rel="prefetch" href="/documentation/assets/js/126.cc4e1411.js"><link rel="prefetch" href="/documentation/assets/js/127.c5ffdd97.js"><link rel="prefetch" href="/documentation/assets/js/128.1f54f6e8.js"><link rel="prefetch" href="/documentation/assets/js/129.2dcdfec0.js"><link rel="prefetch" href="/documentation/assets/js/13.5e4e465f.js"><link rel="prefetch" href="/documentation/assets/js/130.b1d89f87.js"><link rel="prefetch" href="/documentation/assets/js/131.b281eece.js"><link rel="prefetch" href="/documentation/assets/js/132.32d356c0.js"><link rel="prefetch" href="/documentation/assets/js/133.dea5ceea.js"><link rel="prefetch" href="/documentation/assets/js/134.657f2822.js"><link rel="prefetch" href="/documentation/assets/js/135.6c2b00ab.js"><link rel="prefetch" href="/documentation/assets/js/136.5aa799e5.js"><link rel="prefetch" href="/documentation/assets/js/137.027ce2e3.js"><link rel="prefetch" href="/documentation/assets/js/138.84d27a57.js"><link rel="prefetch" href="/documentation/assets/js/139.b6d5190a.js"><link rel="prefetch" href="/documentation/assets/js/14.03ab7127.js"><link rel="prefetch" href="/documentation/assets/js/140.19f987ff.js"><link rel="prefetch" href="/documentation/assets/js/141.14604fe6.js"><link rel="prefetch" href="/documentation/assets/js/142.d68d3965.js"><link rel="prefetch" href="/documentation/assets/js/143.82170084.js"><link rel="prefetch" href="/documentation/assets/js/144.6c413a51.js"><link rel="prefetch" href="/documentation/assets/js/145.85f513c2.js"><link rel="prefetch" href="/documentation/assets/js/146.69931ee5.js"><link rel="prefetch" href="/documentation/assets/js/147.99565957.js"><link rel="prefetch" href="/documentation/assets/js/148.0e612dbc.js"><link rel="prefetch" href="/documentation/assets/js/149.f30e8220.js"><link rel="prefetch" href="/documentation/assets/js/15.d396975b.js"><link rel="prefetch" href="/documentation/assets/js/150.0c9753db.js"><link rel="prefetch" href="/documentation/assets/js/151.8ab13dbd.js"><link rel="prefetch" href="/documentation/assets/js/152.764717ac.js"><link rel="prefetch" href="/documentation/assets/js/153.7803d404.js"><link rel="prefetch" href="/documentation/assets/js/154.bd827a0b.js"><link rel="prefetch" href="/documentation/assets/js/155.da989993.js"><link rel="prefetch" href="/documentation/assets/js/156.88b9c6ae.js"><link rel="prefetch" href="/documentation/assets/js/157.a03da58b.js"><link rel="prefetch" href="/documentation/assets/js/158.9ffa1f4b.js"><link rel="prefetch" href="/documentation/assets/js/159.c9e7f655.js"><link rel="prefetch" href="/documentation/assets/js/16.b55f85d8.js"><link rel="prefetch" href="/documentation/assets/js/160.2bd65850.js"><link rel="prefetch" href="/documentation/assets/js/161.3a0d1dbd.js"><link rel="prefetch" href="/documentation/assets/js/162.f2c40e35.js"><link rel="prefetch" href="/documentation/assets/js/163.9e58fd9b.js"><link rel="prefetch" href="/documentation/assets/js/164.e6d8d2eb.js"><link rel="prefetch" href="/documentation/assets/js/165.dec02438.js"><link rel="prefetch" href="/documentation/assets/js/166.5fce4af0.js"><link rel="prefetch" href="/documentation/assets/js/167.e8a5dbdb.js"><link rel="prefetch" href="/documentation/assets/js/168.72551fbc.js"><link rel="prefetch" href="/documentation/assets/js/169.677dcc68.js"><link rel="prefetch" href="/documentation/assets/js/17.6785e6d9.js"><link rel="prefetch" href="/documentation/assets/js/170.70bd3102.js"><link rel="prefetch" href="/documentation/assets/js/171.5d4f9541.js"><link rel="prefetch" href="/documentation/assets/js/172.4ac1b6e7.js"><link rel="prefetch" href="/documentation/assets/js/173.77568b57.js"><link rel="prefetch" href="/documentation/assets/js/174.d7fd37f1.js"><link rel="prefetch" href="/documentation/assets/js/175.79ff26b2.js"><link rel="prefetch" href="/documentation/assets/js/176.94c4e810.js"><link rel="prefetch" href="/documentation/assets/js/177.89495945.js"><link rel="prefetch" href="/documentation/assets/js/178.48984b1b.js"><link rel="prefetch" href="/documentation/assets/js/179.a88024e4.js"><link rel="prefetch" href="/documentation/assets/js/18.b55aaad5.js"><link rel="prefetch" href="/documentation/assets/js/180.44525d66.js"><link rel="prefetch" href="/documentation/assets/js/181.8949cc1a.js"><link rel="prefetch" href="/documentation/assets/js/182.6f280faa.js"><link rel="prefetch" href="/documentation/assets/js/183.bfa48681.js"><link rel="prefetch" href="/documentation/assets/js/184.a9d05d0a.js"><link rel="prefetch" href="/documentation/assets/js/185.7b8bb8a3.js"><link rel="prefetch" href="/documentation/assets/js/186.8005eeae.js"><link rel="prefetch" href="/documentation/assets/js/187.ca1a9780.js"><link rel="prefetch" href="/documentation/assets/js/188.cfe36daa.js"><link rel="prefetch" href="/documentation/assets/js/189.07c07d12.js"><link rel="prefetch" href="/documentation/assets/js/19.15e2d2da.js"><link rel="prefetch" href="/documentation/assets/js/190.c4b6a08d.js"><link rel="prefetch" href="/documentation/assets/js/191.d5183df6.js"><link rel="prefetch" href="/documentation/assets/js/192.832b24a1.js"><link rel="prefetch" href="/documentation/assets/js/193.d55dc024.js"><link rel="prefetch" href="/documentation/assets/js/194.727bbc56.js"><link rel="prefetch" href="/documentation/assets/js/195.3e80a478.js"><link rel="prefetch" href="/documentation/assets/js/196.a7396b50.js"><link rel="prefetch" href="/documentation/assets/js/197.6a9ad504.js"><link rel="prefetch" href="/documentation/assets/js/198.9d8c09be.js"><link rel="prefetch" href="/documentation/assets/js/199.dfc96c82.js"><link rel="prefetch" href="/documentation/assets/js/20.b5ef60b7.js"><link rel="prefetch" href="/documentation/assets/js/201.ce993f3e.js"><link rel="prefetch" href="/documentation/assets/js/202.5ba73c82.js"><link rel="prefetch" href="/documentation/assets/js/203.6cb5131c.js"><link rel="prefetch" href="/documentation/assets/js/204.341d69e2.js"><link rel="prefetch" href="/documentation/assets/js/205.60134d40.js"><link rel="prefetch" href="/documentation/assets/js/206.8bee6ae2.js"><link rel="prefetch" href="/documentation/assets/js/207.3cc1f274.js"><link rel="prefetch" href="/documentation/assets/js/208.5188fe93.js"><link rel="prefetch" href="/documentation/assets/js/209.55e562cc.js"><link rel="prefetch" href="/documentation/assets/js/21.9b728cc4.js"><link rel="prefetch" href="/documentation/assets/js/210.2d1b9a67.js"><link rel="prefetch" href="/documentation/assets/js/211.e90cfc76.js"><link rel="prefetch" href="/documentation/assets/js/212.66646a3c.js"><link rel="prefetch" href="/documentation/assets/js/213.93c542a3.js"><link rel="prefetch" href="/documentation/assets/js/214.23408f0f.js"><link rel="prefetch" href="/documentation/assets/js/215.6a4b88d6.js"><link rel="prefetch" href="/documentation/assets/js/216.6ea374a9.js"><link rel="prefetch" href="/documentation/assets/js/217.f3dd93be.js"><link rel="prefetch" href="/documentation/assets/js/218.49d3c593.js"><link rel="prefetch" href="/documentation/assets/js/219.4fc6f78f.js"><link rel="prefetch" href="/documentation/assets/js/22.0f49a198.js"><link rel="prefetch" href="/documentation/assets/js/220.574af38e.js"><link rel="prefetch" href="/documentation/assets/js/221.a5b9a8fa.js"><link rel="prefetch" href="/documentation/assets/js/222.6c50f390.js"><link rel="prefetch" href="/documentation/assets/js/223.0f9fa129.js"><link rel="prefetch" href="/documentation/assets/js/224.b289797f.js"><link rel="prefetch" href="/documentation/assets/js/225.d675fbcb.js"><link rel="prefetch" href="/documentation/assets/js/226.cd6ff140.js"><link rel="prefetch" href="/documentation/assets/js/227.0d12f321.js"><link rel="prefetch" href="/documentation/assets/js/228.7d3fb64b.js"><link rel="prefetch" href="/documentation/assets/js/229.f172229d.js"><link rel="prefetch" href="/documentation/assets/js/23.7381324f.js"><link rel="prefetch" href="/documentation/assets/js/230.26a9ef25.js"><link rel="prefetch" href="/documentation/assets/js/231.cc81f852.js"><link rel="prefetch" href="/documentation/assets/js/232.efca708d.js"><link rel="prefetch" href="/documentation/assets/js/233.f2497aaf.js"><link rel="prefetch" href="/documentation/assets/js/234.0fcab3d9.js"><link rel="prefetch" href="/documentation/assets/js/235.0b5b1d6e.js"><link rel="prefetch" href="/documentation/assets/js/236.4d31b78b.js"><link rel="prefetch" href="/documentation/assets/js/24.c552397c.js"><link rel="prefetch" href="/documentation/assets/js/25.4ab8c249.js"><link rel="prefetch" href="/documentation/assets/js/26.d73dbbcc.js"><link rel="prefetch" href="/documentation/assets/js/27.80cada79.js"><link rel="prefetch" href="/documentation/assets/js/28.d07ff19e.js"><link rel="prefetch" href="/documentation/assets/js/29.7e571de7.js"><link rel="prefetch" href="/documentation/assets/js/3.667d771c.js"><link rel="prefetch" href="/documentation/assets/js/30.d48353ae.js"><link rel="prefetch" href="/documentation/assets/js/31.9971c2d7.js"><link rel="prefetch" href="/documentation/assets/js/32.52b828e9.js"><link rel="prefetch" href="/documentation/assets/js/33.e2490e0f.js"><link rel="prefetch" href="/documentation/assets/js/34.0a882501.js"><link rel="prefetch" href="/documentation/assets/js/35.13abcde1.js"><link rel="prefetch" href="/documentation/assets/js/36.cbe31877.js"><link rel="prefetch" href="/documentation/assets/js/37.624f6a2c.js"><link rel="prefetch" href="/documentation/assets/js/38.e711e98f.js"><link rel="prefetch" href="/documentation/assets/js/39.52d74643.js"><link rel="prefetch" href="/documentation/assets/js/4.8d78e57b.js"><link rel="prefetch" href="/documentation/assets/js/40.d86e6133.js"><link rel="prefetch" href="/documentation/assets/js/41.85cb04af.js"><link rel="prefetch" href="/documentation/assets/js/42.c47c06d3.js"><link rel="prefetch" href="/documentation/assets/js/43.893f50e8.js"><link rel="prefetch" href="/documentation/assets/js/44.2e542683.js"><link rel="prefetch" href="/documentation/assets/js/45.cb786b7a.js"><link rel="prefetch" href="/documentation/assets/js/46.be3926f9.js"><link rel="prefetch" href="/documentation/assets/js/47.957aefb6.js"><link rel="prefetch" href="/documentation/assets/js/48.3b1c2b2c.js"><link rel="prefetch" href="/documentation/assets/js/49.39f89575.js"><link rel="prefetch" href="/documentation/assets/js/5.0769392f.js"><link rel="prefetch" href="/documentation/assets/js/50.8f51ada2.js"><link rel="prefetch" href="/documentation/assets/js/51.f2c818c5.js"><link rel="prefetch" href="/documentation/assets/js/52.c280dabd.js"><link rel="prefetch" href="/documentation/assets/js/53.1e6f2859.js"><link rel="prefetch" href="/documentation/assets/js/54.69f771da.js"><link rel="prefetch" href="/documentation/assets/js/55.f832508a.js"><link rel="prefetch" href="/documentation/assets/js/56.50f3e765.js"><link rel="prefetch" href="/documentation/assets/js/57.b6afe88e.js"><link rel="prefetch" href="/documentation/assets/js/58.fbd2c077.js"><link rel="prefetch" href="/documentation/assets/js/59.090ac7df.js"><link rel="prefetch" href="/documentation/assets/js/6.30a3c916.js"><link rel="prefetch" href="/documentation/assets/js/60.6ce7539e.js"><link rel="prefetch" href="/documentation/assets/js/61.d66a0058.js"><link rel="prefetch" href="/documentation/assets/js/62.8d0172ca.js"><link rel="prefetch" href="/documentation/assets/js/63.10de04c6.js"><link rel="prefetch" href="/documentation/assets/js/64.ffa4b60d.js"><link rel="prefetch" href="/documentation/assets/js/65.d680004c.js"><link rel="prefetch" href="/documentation/assets/js/66.e6a3a62d.js"><link rel="prefetch" href="/documentation/assets/js/67.bf113a4f.js"><link rel="prefetch" href="/documentation/assets/js/68.7b3aba99.js"><link rel="prefetch" href="/documentation/assets/js/69.9e419194.js"><link rel="prefetch" href="/documentation/assets/js/7.01c421cc.js"><link rel="prefetch" href="/documentation/assets/js/70.31f63916.js"><link rel="prefetch" href="/documentation/assets/js/71.8437ce1d.js"><link rel="prefetch" href="/documentation/assets/js/72.9fd67f12.js"><link rel="prefetch" href="/documentation/assets/js/73.d9723e30.js"><link rel="prefetch" href="/documentation/assets/js/74.375f7d72.js"><link rel="prefetch" href="/documentation/assets/js/75.31e8428a.js"><link rel="prefetch" href="/documentation/assets/js/76.e378d7a0.js"><link rel="prefetch" href="/documentation/assets/js/77.593c83f5.js"><link rel="prefetch" href="/documentation/assets/js/78.3ec9349c.js"><link rel="prefetch" href="/documentation/assets/js/79.460f2745.js"><link rel="prefetch" href="/documentation/assets/js/8.e763cddc.js"><link rel="prefetch" href="/documentation/assets/js/80.ea37236a.js"><link rel="prefetch" href="/documentation/assets/js/81.664bb611.js"><link rel="prefetch" href="/documentation/assets/js/82.48fcd481.js"><link rel="prefetch" href="/documentation/assets/js/83.0052f221.js"><link rel="prefetch" href="/documentation/assets/js/84.dd79b032.js"><link rel="prefetch" href="/documentation/assets/js/85.23b2ba1e.js"><link rel="prefetch" href="/documentation/assets/js/86.215fd908.js"><link rel="prefetch" href="/documentation/assets/js/87.934cffa8.js"><link rel="prefetch" href="/documentation/assets/js/88.0c20f463.js"><link rel="prefetch" href="/documentation/assets/js/89.c286622e.js"><link rel="prefetch" href="/documentation/assets/js/9.81b4bf7f.js"><link rel="prefetch" href="/documentation/assets/js/90.3df2ac88.js"><link rel="prefetch" href="/documentation/assets/js/91.7210eec6.js"><link rel="prefetch" href="/documentation/assets/js/92.3d023035.js"><link rel="prefetch" href="/documentation/assets/js/93.18b97acd.js"><link rel="prefetch" href="/documentation/assets/js/94.e4c156b6.js"><link rel="prefetch" href="/documentation/assets/js/95.439b7516.js"><link rel="prefetch" href="/documentation/assets/js/96.025e5f90.js"><link rel="prefetch" href="/documentation/assets/js/97.8de3aec7.js"><link rel="prefetch" href="/documentation/assets/js/98.24902ad9.js"><link rel="prefetch" href="/documentation/assets/js/99.d1256fa1.js">
    <link rel="stylesheet" href="/documentation/assets/css/0.styles.fdb13168.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/documentation/" class="home-link router-link-active"><!----> <span class="site-name">Technical documentation of Wellms</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Technical Documentations" class="dropdown-title"><span class="title">Technical Documentations</span> <span class="arrow down"></span></button> <button type="button" aria-label="Technical Documentations" class="mobile-dropdown-title"><span class="title">Technical Documentations</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/" class="nav-link">
  Getting Started
</a></li><li class="dropdown-item"><!----> <a href="/documentation/app-guide/" class="nav-link">
  Admin Panel (App)
</a></li><li class="dropdown-item"><!----> <a href="/documentation/api-reference/" class="nav-link">
  Api Reference
</a></li><li class="dropdown-item"><!----> <a href="/documentation/packages/" class="nav-link router-link-active">
  Packages
</a></li><li class="dropdown-item"><!----> <a href="/documentation/development/" class="nav-link">
  Development
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/EscolaLMS" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/EscolaLMS/documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Technical Documentations" class="dropdown-title"><span class="title">Technical Documentations</span> <span class="arrow down"></span></button> <button type="button" aria-label="Technical Documentations" class="mobile-dropdown-title"><span class="title">Technical Documentations</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/" class="nav-link">
  Getting Started
</a></li><li class="dropdown-item"><!----> <a href="/documentation/app-guide/" class="nav-link">
  Admin Panel (App)
</a></li><li class="dropdown-item"><!----> <a href="/documentation/api-reference/" class="nav-link">
  Api Reference
</a></li><li class="dropdown-item"><!----> <a href="/documentation/packages/" class="nav-link router-link-active">
  Packages
</a></li><li class="dropdown-item"><!----> <a href="/documentation/development/" class="nav-link">
  Development
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/EscolaLMS" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/EscolaLMS/documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Packages</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/documentation/packages/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/documentation/packages/lorem1.html" class="sidebar-link">Core</a></li><li><a href="/documentation/packages/lorem2.html" class="sidebar-link">API Laravel REST API. Main module that compose all Laravel packages</a></li><li><a href="/documentation/packages/auth.html" class="sidebar-link">Auth. User authentication. Roles &amp; Permission Management</a></li><li><a href="/documentation/packages/cart.html" class="sidebar-link">Cart. General shop management.</a></li><li><a href="/documentation/packages/categories.html" class="sidebar-link">Categories</a></li><li><a href="/documentation/packages/consultations.html" class="sidebar-link">Consultations. One to one conversation package with `jitsi`</a></li><li><a href="/documentation/packages/lorem7.html" class="sidebar-link">Core. Core Package </a></li><li><a href="/documentation/packages/courses.html" class="sidebar-link">Courses. and content package</a></li><li><a href="/documentation/packages/lorem9.html" class="sidebar-link">Courses Import Export. ZIP package and duplicate feature.</a></li><li><a href="/documentation/packages/csv-users.html" class="sidebar-link">CSV-Users. Exporting and importing users in `.csv` format</a></li><li><a href="/documentation/packages/fakturownia.html" class="sidebar-link">Fakturownia-Integration. Generates Invoice from Fakturowania</a></li><li><a href="/documentation/packages/files.html" class="sidebar-link">Files. Uploading, deleting and reusing files.</a></li><li><a href="/documentation/packages/lorem13.html" class="sidebar-link">H5P Headless.</a></li><li><a href="/documentation/packages/images.html" aria-current="page" class="active sidebar-link">Images. Responsive and compressions processing module</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/documentation/packages/images.html#what-does-it-do" class="sidebar-link">What does it do</a></li><li class="sidebar-sub-header"><a href="/documentation/packages/images.html#installation" class="sidebar-link">Installation</a></li><li class="sidebar-sub-header"><a href="/documentation/packages/images.html#database" class="sidebar-link">Database</a></li><li class="sidebar-sub-header"><a href="/documentation/packages/images.html#examples" class="sidebar-link">Examples</a></li><li class="sidebar-sub-header"><a href="/documentation/packages/images.html#hashing-algorithm" class="sidebar-link">Hashing algorithm</a></li><li class="sidebar-sub-header"><a href="/documentation/packages/images.html#endpoint" class="sidebar-link">Endpoint</a></li><li class="sidebar-sub-header"><a href="/documentation/packages/images.html#tests" class="sidebar-link">Tests</a></li><li class="sidebar-sub-header"><a href="/documentation/packages/images.html#events" class="sidebar-link">Events</a></li><li class="sidebar-sub-header"><a href="/documentation/packages/images.html#listeners" class="sidebar-link">Listeners</a></li><li class="sidebar-sub-header"><a href="/documentation/packages/images.html#how-to-use-this-on-frontend" class="sidebar-link">How to use this on frontend</a></li></ul></li><li><a href="/documentation/packages/invoices.html" class="sidebar-link">Invoices generation.</a></li><li><a href="/documentation/packages/jitsi.html" class="sidebar-link">Jitsi.</a></li><li><a href="/documentation/packages/lorem17.html" class="sidebar-link">Docker Images.</a></li><li><a href="/documentation/packages/lorem18.html" class="sidebar-link">LRS xAPI Learning Record Stores</a></li><li><a href="/documentation/packages/mailerlite.html" class="sidebar-link">MailerLite. Customized group for LMS events</a></li><li><a href="/documentation/packages/mattermost.html" class="sidebar-link">Mattermost.</a></li><li><a href="/documentation/packages/model-fields.html" class="sidebar-link">Model Fields. Extra attributes to any model</a></li><li><a href="/documentation/packages/notifications.html" class="sidebar-link">Notifications.</a></li><li><a href="/documentation/packages/lorem22.html" class="sidebar-link">Pages. Simple CMS.</a></li><li><a href="/documentation/packages/payments.html" class="sidebar-link">Payments. Facades that allows to connect payment gateways</a></li><li><a href="/documentation/packages/lorem24.html" class="sidebar-link">Permissions and Roles.</a></li><li><a href="/documentation/packages/questionnaire.html" class="sidebar-link">Questionnaire. Answers &amp; Reports</a></li><li><a href="/documentation/packages/reports.html" class="sidebar-link">Reports. Courses reports.</a></li><li><a href="/documentation/packages/lorem27.html" class="sidebar-link">Scorm. Attach Scorm packages to courses</a></li><li><a href="/documentation/packages/settings.html" class="sidebar-link">Settings. Additional global fields of various types and other package setup</a></li><li><a href="/documentation/packages/stationary-events.html" class="sidebar-link">Stationary Events.</a></li><li><a href="/documentation/packages/tags.html" class="sidebar-link">Tags. Tagging for any Module</a></li><li><a href="/documentation/packages/templates.html" class="sidebar-link">Templates.</a></li><li><a href="/documentation/packages/lorem32.html" class="sidebar-link">Templates-Certificates. Editing certificate templates</a></li><li><a href="/documentation/packages/templates-email.html" class="sidebar-link">Templates-Email. Notification management with custom mjml templates.</a></li><li><a href="/documentation/packages/templates-pdf.html" class="sidebar-link">Templates-PDF. Templates in fabric.js frontend rendering format.</a></li><li><a href="/documentation/packages/lorem35.html" class="sidebar-link">Templates-SMS. Notification management with custom templates</a></li><li><a href="/documentation/packages/topic-types.html" class="sidebar-link">Topic Types. List of possible Topic Types for Course content</a></li><li><a href="/documentation/packages/lorem37.html" class="sidebar-link">Translations.</a></li><li><a href="/documentation/packages/lorem38.html" class="sidebar-link">Video Processing. Generation `hls` streaming formats</a></li><li><a href="/documentation/packages/vouchers.html" class="sidebar-link">Vouchers. E-commerce vouchers to manage cart promotion</a></li><li><a href="/documentation/packages/webinar.html" class="sidebar-link">Webinar. Live video stream with `Jitsi` and `YouTube`</a></li><li><a href="/documentation/packages/youtube.html" class="sidebar-link">Youtube. Package Youtube integration</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="image-processing-module"><a href="#image-processing-module" class="header-anchor">#</a> Image processing module</h1> <p><a href="https://escolalms.github.io/Images/" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/documentation-swagger-green" alt="swagger"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://codecov.io/gh/EscolaLMS/Images" target="_blank" rel="noopener noreferrer"><img src="https://codecov.io/gh/EscolaLMS/Images/branch/main/graph/badge.svg?token=NRAN4R8AGZ" alt="codecov"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://github.com/EscolaLMS/Courses/actions/workflows/test.yml" target="_blank" rel="noopener noreferrer"><img src="https://github.com/EscolaLMS/Images/actions/workflows/test.yml/badge.svg" alt="phpunit"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://packagist.org/packages/escolalms/images" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/packagist/dt/escolalms/images" alt="downloads"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://packagist.org/packages/escolalms/images" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/packagist/v/escolalms/images" alt="downloads"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://packagist.org/packages/escolalms/images" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/packagist/l/escolalms/images" alt="downloads"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://codeclimate.com/github/EscolaLMS/Images/maintainability" target="_blank" rel="noopener noreferrer"><img src="https://api.codeclimate.com/v1/badges/7dfeae0462e3599797bf/maintainability" alt="Maintainability"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://codeclimate.com/github/EscolaLMS/Images/test_coverage" target="_blank" rel="noopener noreferrer"><img src="https://api.codeclimate.com/v1/badges/7dfeae0462e3599797bf/test_coverage" alt="Test Coverage"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="what-does-it-do"><a href="#what-does-it-do" class="header-anchor">#</a> What does it do</h2> <p>The package creates resized images from source by given parameters. This is a headless approach so the backend doesn't know the requested sizes before frontend requests any.</p> <p>The input images are stored by Laravel in any of available disk (local storage/s3/any bucket). Once a resized version is requested a cached version in created and returend. Below are examples to show the overall idea.</p> <p>The initial resize is done by <a href="https://github.com/Intervention/image" target="_blank" rel="noopener noreferrer">Intervention/image<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> with <code>GD</code> driver. That can be <a href="http://image.intervention.io/getting_started/configuration" target="_blank" rel="noopener noreferrer">configured<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>After inital resized all the images are optimized with <a href="https://packagist.org/packages/spatie/image-optimizer" target="_blank" rel="noopener noreferrer">image-optimizer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>For best results binaries must <a href="https://github.com/spatie/image-optimizer#optimization-tools" target="_blank" rel="noopener noreferrer">be installed<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. EscolaLMS prepared <a href="https://hub.docker.com/r/escolalms/php" target="_blank" rel="noopener noreferrer">Docker Images<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> are available for development (tag <code>work</code>) and production (tag <code>prod</code>).</p> <h2 id="installation"><a href="#installation" class="header-anchor">#</a> Installation</h2> <ul><li><code>composer require escolalms/images</code></li> <li><code>php artisan migrate</code></li></ul> <h2 id="database"><a href="#database" class="header-anchor">#</a> Database</h2> <ul><li><code>image_caches</code> - table for saving the original and resized image path</li></ul> <table><thead><tr><th style="text-align:left;">id</th> <th style="text-align:left;">path</th> <th style="text-align:left;">hash_path</th> <th style="text-align:left;">created_at</th> <th style="text-align:left;">updated_at</th></tr></thead> <tbody><tr><td style="text-align:left;">1</td> <td style="text-align:left;">avatars/1/avatar.jpg</td> <td style="text-align:left;">imgcache/68840270724ee4ff0b481f4fbd2299e13dfe2447.jpg</td> <td style="text-align:left;">2022-05-05 11:29:04</td> <td style="text-align:left;">2022-05-05 11:29:04</td></tr> <tr><td style="text-align:left;">3</td> <td style="text-align:left;">avatars/4/avatar4.jpg</td> <td style="text-align:left;">imgcache/d0f1ab43ae7f2924682b2ce734a24fa7066a8ea7.jpg</td> <td style="text-align:left;">2022-05-05 11:30:49</td> <td style="text-align:left;">2022-05-05 11:30:49</td></tr> <tr><td style="text-align:left;">2</td> <td style="text-align:left;">avatars/2/avatar2.jpg</td> <td style="text-align:left;">imgcache/94c6c83db6562161d38620a74e4e07fb3d9e39ed.jpg</td> <td style="text-align:left;">2022-05-05 11:30:39</td> <td style="text-align:left;">2022-05-05 11:30:39</td></tr></tbody></table> <h2 id="examples"><a href="#examples" class="header-anchor">#</a> Examples</h2> <h3 id="default-one-image-as-302-redirect-result"><a href="#default-one-image-as-302-redirect-result" class="header-anchor">#</a> Default. One image as <code>302</code> redirect result .</h3> <p>Basic resize is made by URL API call which redirects to new created file</p> <p>Example <code>GET</code> call</p> <ul><li><code>http://localhost/api/images/img?path=test.jpg&amp;w=100</code> call should return resized image to width 100px</li> <li>checks if file exsitis</li> <li>if not, creates one with availabe libraries</li> <li>returns 302 redirect</li> <li>example <code>http://localhost/storage/imgcache/891ee133a8bb111497d494d4c91fe292d9d16bb3.jpg</code> (assuming you're using local disk storage, in case of s3 location origin would differ)</li></ul> <h3 id="resizing-many-images-at-once-json-array-as-a-result"><a href="#resizing-many-images-at-once-json-array-as-a-result" class="header-anchor">#</a> Resizing many images at once. JSON array as a result.</h3> <p>Example <code>POST</code> call like</p> <div class="language-bash extra-class"><pre class="language-bash"><code>POST /api/images/img HTTP/1.1
Host: localhost:1000
Content-Type: application/json
Content-Length: <span class="token number">212</span>

<span class="token punctuation">{</span>
  <span class="token string">&quot;paths&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token string">&quot;path&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;tutor_avatar.jpg&quot;</span>,
    <span class="token string">&quot;params&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;w&quot;</span><span class="token builtin class-name">:</span> <span class="token number">100</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>, <span class="token punctuation">{</span>
    <span class="token string">&quot;path&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;tutor_avatar.jpg&quot;</span>,
    <span class="token string">&quot;params&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;w&quot;</span><span class="token builtin class-name">:</span> <span class="token number">200</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>, <span class="token punctuation">{</span>
    <span class="token string">&quot;path&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;tutor_avatar.jpg&quot;</span>,
    <span class="token string">&quot;params&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;w&quot;</span><span class="token builtin class-name">:</span> <span class="token number">300</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span> 
</code></pre></div><p>generates following result</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost/storage/imgcache/3421584c40d270d0fa7ef0c31445a1565db07cb4.jpg&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;imgcache/3421584c40d270d0fa7ef0c31445a1565db07cb4.jpg&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hash&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3421584c40d270d0fa7ef0c31445a1565db07cb4&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost/storage/imgcache/7efc528c2cc7b57d79a42f80d2c1891b517cabfe.jpg&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;imgcache/7efc528c2cc7b57d79a42f80d2c1891b517cabfe.jpg&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hash&quot;</span><span class="token operator">:</span> <span class="token string">&quot;7efc528c2cc7b57d79a42f80d2c1891b517cabfe&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost/storage/imgcache/5db4f572d8c8b1cb6ad97a3bffc9fd6c18b56cc3.jpg&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;imgcache/5db4f572d8c8b1cb6ad97a3bffc9fd6c18b56cc3.jpg&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hash&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5db4f572d8c8b1cb6ad97a3bffc9fd6c18b56cc3&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span> 
</code></pre></div><h2 id="hashing-algorithm"><a href="#hashing-algorithm" class="header-anchor">#</a> Hashing algorithm</h2> <p>There is simple algorithm to guess the result image URL. This allows frontend application to know the processed URL without calling API. As follows</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$path</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'test.jpg'</span><span class="token punctuation">;</span>
<span class="token variable">$params</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'w'</span><span class="token operator">=&gt;</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token variable">$hash</span> <span class="token operator">=</span> <span class="token function">sha1</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token operator">.</span><span class="token function">json_encode</span><span class="token punctuation">(</span><span class="token variable">$params</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>then result URL would be</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$output_file</span> <span class="token operator">=</span> <span class="token variable">$url_prefix</span><span class="token operator">.</span><span class="token variable">$hash</span><span class="token operator">.</span><span class="token variable">$extension</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="endpoint"><a href="#endpoint" class="header-anchor">#</a> Endpoint</h2> <p>There is API endpoints documentation <a href="https://escolalms.github.io/Images/" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/documentation-swagger-green" alt="swagger"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="tests"><a href="#tests" class="header-anchor">#</a> Tests</h2> <p>Run <code>./vendor/bin/phpunit</code> to run tests.</p> <p>Test details
<a href="https://codecov.io/gh/EscolaLMS/Images" target="_blank" rel="noopener noreferrer"><img src="https://codecov.io/gh/EscolaLMS/Images/branch/main/graph/badge.svg?token=NRAN4R8AGZ" alt="codecov"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://github.com/EscolaLMS/Courses/actions/workflows/test.yml" target="_blank" rel="noopener noreferrer"><img src="https://github.com/EscolaLMS/Images/actions/workflows/test.yml/badge.svg" alt="phpunit"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="events"><a href="#events" class="header-anchor">#</a> Events</h2> <p>This package extends <code>filesystem</code>.</p> <div class="language- extra-class"><pre class="language-text"><code>$this-&gt;app-&gt;extend('filesystem', function ($service, $app) {
    return new CustomFilesystemManager($app);
});
</code></pre></div><ol><li><code>FileDeleted</code> - The event is dispatched when you use <code>delete</code> method on the <code>Storage</code> facade.</li> <li><code>FileStored</code> - The event is dispatched when you use <code>put</code>, <code>putFile</code> or <code>putFileAs</code> method.</li></ol> <h2 id="listeners"><a href="#listeners" class="header-anchor">#</a> Listeners</h2> <p>This package listens for <code>FileDeleted</code> and <code>FileStored</code> events and removes the resized images from the given path.</p> <h2 id="how-to-use-this-on-frontend"><a href="#how-to-use-this-on-frontend" class="header-anchor">#</a> How to use this on frontend</h2> <p>Below is our totally <strong>headless</strong> approach on generating images</p> <p>The following example tries to achives 2 purposes</p> <ul><li>generate image on fly, frontend decide what sizes are needed</li> <li>images are not served by API</li></ul> <p>The idea is that since we know tha hashing algoritm for cached images we can guess that the URL will be like.
If that URL is throwing 404 then we're calling the API endpoint to generate one.
Fortunately this endpoint creates an requested image, caches it and returns redirect which is good for image src.</p> <p>A major disadvantage of this approach is that first user once will get 404 in networking and experince few seconds delay before image is rendered after not founded.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sha1.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// Initial variables </span>
  <span class="token keyword">const</span> imgPath <span class="token operator">=</span> <span class="token string">&quot;tutor_avatar.jpg&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> imgPrefix <span class="token operator">=</span> <span class="token string">&quot;http://localhost/storage/imgcache&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> apiUrl <span class="token operator">=</span> <span class="token string">&quot;http://localhost/api/images/img&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> rndWith <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">w</span><span class="token operator">:</span> rndWith<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// random width params</span>
  <span class="token comment">// super important that all param values are strings </span>
  <span class="token comment">// hash from { w: 100 } is different then { w: &quot;100&quot; }</span>
			
  <span class="token comment">// stright forward helper to convert obejct to URL query params </span>
  <span class="token keyword">const</span> <span class="token function-variable function">paramsToUrl</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> e<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;=&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">/** 
   * @param string path, example &quot;tutor_avatar.jpg&quot;
   * @param array params, example { w: &quot;100&quot; } or { w: &quot;100&quot;, h: &quot;10&quot; }
   * @return Image 
   */</span> 
  <span class="token keyword">const</span> <span class="token function-variable function">getImage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">,</span> params</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> hash <span class="token operator">=</span> <span class="token constant">SHA1</span><span class="token punctuation">(</span>path <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>imgPrefix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hash<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>path<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> imgApiUrl <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>apiUrl<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/?path=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>imgPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">paramsToUrl</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    image<span class="token punctuation">.</span>src <span class="token operator">=</span> url<span class="token punctuation">;</span>
    image<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>image<span class="token punctuation">.</span>src <span class="token operator">!=</span> imgApiUrl<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// the cached version does not exists yet, lets call API to create one and redirect.</span>
        image<span class="token punctuation">.</span>src <span class="token operator">=</span> imgApiUrl<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> image<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token function">getImage</span><span class="token punctuation">(</span>imgPath<span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span> 
</code></pre></div><p>Working example is availabe in <a href="https://github.com/EscolaLMS/Images/tree/main/doc" target="_blank" rel="noopener noreferrer">doc<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> folder.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/EscolaLMS/documentation/edit/main/docs/packages/images.md" target="_blank" rel="noopener noreferrer">Suggest changes on this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/documentation/packages/lorem13.html" class="prev">
        H5P Headless.
      </a></span> <span class="next"><a href="/documentation/packages/invoices.html">
        Invoices generation.
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/documentation/assets/js/app.9a281ed1.js" defer></script><script src="/documentation/assets/js/2.04ee873f.js" defer></script><script src="/documentation/assets/js/200.0b46be3d.js" defer></script>
  </body>
</html>
